{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"]},"docs":[{"location":"","title":"\u6982\u8981","text":"<p>\u3053\u306e\u30b5\u30a4\u30c8\u306f\u79c1\u304c\u30e1\u30f3\u30c6\u30ca\u30f3\u30b9\u3057\u3066\u3044\u308bOSS\u306e\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u3068\u30d6\u30ed\u30b0\u3092\u63b2\u8f09\u3057\u3066\u3044\u307e\u3059\u3002</p> <p>\u3054\u610f\u898b\u3001\u3054\u611f\u60f3\u306fGitHub\u306eIssue\u307e\u305f\u306fX(\u65e7Twitter)\u306b\u3054\u9023\u7d61\u304f\u3060\u3055\u3044\u3002</p>"},{"location":"articles/cannot-change-perf-event-paranoid/","title":"perf_event_paranoid\u3092\u5909\u66f4\u3067\u304d\u306a\u3044\u6642\u306e\u5bfe\u51e6\u6cd5","text":"<p>\u3053\u306e\u8a18\u4e8b\u306f<code>perf</code>\u3092\u4f7f\u3044\u305f\u3044\u304c\u3001\u4f55\u3089\u304b\u306e\u7406\u7531\u3067<code>/proc/sys/kernel/perf_event_paranoid</code>\u3092\u5909\u66f4\u3067\u304d\u306a\u3044\u65b9\u5411\u3051\u3067\u3059\u3002Ubuntu 22.04\u3067\u691c\u8a3c\u6e08\u307f\u3067\u3059\u3002</p>"},{"location":"articles/cannot-change-perf-event-paranoid/#\u524d\u63d0","title":"\u524d\u63d0","text":"<p>\u4ee5\u4e0b\u3092\u4eee\u5b9a\u3057\u307e\u3059\u3002</p> <ul> <li>\u7279\u6a29(sudo\u3092\u4f7f\u3048\u308b)\u3092\u6301\u3063\u3066\u3044\u308b</li> <li>perf\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u6e08\u307f</li> </ul>"},{"location":"articles/cannot-change-perf-event-paranoid/#\u3084\u308a\u65b9","title":"\u3084\u308a\u65b9","text":"<p>\u307e\u305a\u3001<code>perf</code>\u304c\u3042\u308b\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306b\u79fb\u52d5\u3057\u307e\u3059\u3002\u30b7\u30f3\u30dc\u30ea\u30c3\u30af\u30ea\u30f3\u30af\u3067\u3082\u69cb\u3044\u307e\u305b\u3093\u3002</p> <pre><code># which perf\n/usr/bin/perf\n# cd /usr/bin\n</code></pre> <p>\u6b21\u306b\u3001<code>perf_users</code>\u3068\u3044\u3046\u30b0\u30eb\u30fc\u30d7\u3092\u4f5c\u6210\u3057\u3001\u3053\u306e\u30b0\u30eb\u30fc\u30d7\u306b<code>perf</code>\u3092\u8ffd\u52a0\u3057\u307e\u3059\u3002\u3053\u308c\u306b\u3088\u3063\u3066\u3001<code>perf</code>\u3092\u5b9f\u884c\u3067\u304d\u308b\u30e6\u30fc\u30b6\u30fc\u3092\u5236\u9650\u3067\u304d\u307e\u3059\u3002</p> <pre><code># sudo groupadd perf_users\n# ls -alhF\n-rwxr-xr-x  2 root root  11M Oct 19 15:12 perf\n# chgrp perf_users perf\n# ls -alhF\n-rwxr-xr-x  2 root perf_users  11M Oct 19 15:12 perf\n# chmod o-rwx perf\n# ls -alhF\n-rwxr-x---  2 root perf_users  11M Oct 19 15:12 perf\n</code></pre> <p><code>perf</code>\u306b\u5fc5\u8981\u306a\u6a29\u9650\u3092\u4e0e\u3048\u3001<code>perf_users</code>\u306e\u30e1\u30f3\u30d0\u30fc\u304c\u30d1\u30d5\u30a9\u30fc\u30de\u30f3\u30b9\u30e2\u30cb\u30bf\u30ea\u30f3\u30b0\u3067\u304d\u308b\u3088\u3046\u306b\u3057\u307e\u3059\u3002</p> <pre><code># setcap \"cap_perfmon=ep\" perf\n# setcap -v \"cap_perfmon=ep\" perf\nperf: OK\n# getcap perf\nperf cap_perfmon=ep\n</code></pre>"},{"location":"articles/cannot-change-perf-event-paranoid/#\u89e3\u8aac","title":"\u89e3\u8aac","text":"<p>Linux\u3067\u306f\u3001\u7279\u6a29\u3092\u30b1\u30fc\u30d1\u30d3\u30ea\u30c6\u30a3(capabilities)\u3068\u547c\u3070\u308c\u308b\u3001\u7570\u306a\u308b\u5358\u4f4d\u306b\u5206\u5272\u3057\u3066\u3044\u3066\u3001\u975e\u7279\u6a29\u30e6\u30fc\u30b6\u30fc\u306e\u30d7\u30ed\u30bb\u30b9\u3084\u30d5\u30a1\u30a4\u30eb\u306b\u5bfe\u3057\u3066\u30b9\u30ec\u30c3\u30c9\u6bce\u306b\u500b\u5225\u306b\u6709\u52b9\u307e\u305f\u306f\u7121\u52b9\u306b\u51fa\u6765\u307e\u3059\u3002</p> <p><code>CAP_PERFMON</code>\u3068\u3044\u3046\u30b1\u30fc\u30d1\u30d3\u30ea\u30c6\u30a3\u3092\u6301\u3063\u305f\u975e\u7279\u6a29\u30d7\u30ed\u30bb\u30b9\u306f\u30d1\u30d5\u30a9\u30fc\u30de\u30f3\u30b9\u30e2\u30cb\u30bf\u30ea\u30f3\u30b0\u306b\u95a2\u3057\u3066\u7279\u6a29\u3092\u6301\u3064\u30d7\u30ed\u30bb\u30b9\u3068\u3057\u3066\u6271\u308f\u308c\u307e\u3059\u3002<code>CAP_PERFMON</code>\u306f\u30d1\u30d5\u30a9\u30fc\u30de\u30f3\u30b9\u30e2\u30cb\u30bf\u30ea\u30f3\u30b0\u306e\u305f\u3081\u306b\u5fc5\u8981\u306a\u6700\u5c0f\u9650\u306e\u7279\u6a29\u3057\u304b\u6301\u305f\u305a\u3001\u30e2\u30cb\u30bf\u30ea\u30f3\u30b0\u306e\u305f\u3081\u306e\u5b89\u5168\u306a\u65b9\u6cd5\u3092\u63d0\u4f9b\u3057\u307e\u3059\u3002</p> <p>\u3088\u308a\u8a73\u3057\u304f\u8abf\u3079\u305f\u3044\u6642\u306f\u5fc5\u8981\u306a\u7279\u6a29\u3092\u6307\u5b9a\u3057\u307e\u3059\u3002\u4f8b\u3048\u3070\u3001<code>/proc/kallsyms</code>\u30d5\u30a1\u30a4\u30eb\u304b\u3089\u30ab\u30fc\u30cd\u30eb\u7a7a\u9593\u306e\u30e1\u30e2\u30ea\u30a2\u30c9\u30ec\u30b9\u3092\u8aad\u307f\u305f\u3044\u6642\u306f<code>CAP_SYSLOG</code>\u30b1\u30fc\u30d1\u30d3\u30ea\u30c6\u30a3\u3092\u6307\u5b9a\u3057\u307e\u3059\u3002</p> <p><code>=ep</code>\u306f\u30d5\u30a1\u30a4\u30eb\u3078\u306e\u30b1\u30fc\u30d1\u30d3\u30ea\u30c6\u30a3\u306e\u8a2d\u5b9a\u3067\u3001\u30b9\u30ec\u30c3\u30c9\u8d77\u52d5\u6642\u306b<code>CAP_PERFMON</code>\u3092\u6709\u52b9\u306b\u3059\u308b\u3068\u3044\u3046\u8a2d\u5b9a\u3089\u3057\u3044\u3067\u3059\u3002</p> <p>Linux v5.9\u4ee5\u524d\u3067\u306f<code>CAP_SYS_PTRACE</code>\u304c\u5fc5\u8981\u3067\u3057\u305f\u304c\u3001\u305d\u308c\u4ee5\u964d\u3067\u306f\u5fc5\u8981\u3042\u308a\u307e\u305b\u3093\u3002</p>"},{"location":"articles/cannot-change-perf-event-paranoid/#\u53c2\u8003\u6587\u732e","title":"\u53c2\u8003\u6587\u732e","text":"<ol> <li>Perf events and tool security</li> <li>capabilities - Linux \u306e\u30b1\u30fc\u30d1\u30d3\u30ea\u30c6\u30a3 (capability) \u306e\u6982\u8981</li> </ol>"},{"location":"articles/config-apple-magic-keyboard-in-ubuntu/","title":"Apple Magic Keyboard\u306e\u8a2d\u5b9a","text":"<p>\u53c2\u8003\u306e\u8a18\u4e8b\u304c\u6d88\u3048\u305f\u6642\u306b\u5099\u3048\u3066\u3001Apple\u306e\u30c6\u30f3\u30ad\u30fc\u4ed8\u304d\u65e5\u672c\u8a9eMagic Keyboard\u306e\u8a2d\u5b9a\u65b9\u6cd5\u3092\u3053\u3053\u306b\u6b8b\u3057\u3066\u304a\u304d\u307e\u3059\u3002 \u30b7\u30b9\u30c6\u30e0\u8a00\u8a9e\u3092\u82f1\u8a9e\u3068\u3057\u307e\u3059\u3002</p>"},{"location":"articles/config-apple-magic-keyboard-in-ubuntu/#ubuntu-2204\u306e\u5834\u5408","title":"Ubuntu 22.04\u306e\u5834\u5408","text":""},{"location":"articles/config-apple-magic-keyboard-in-ubuntu/#\u30ad\u30fc\u30dc\u30fc\u30c9\u306e\u8a2d\u5b9a","title":"\u30ad\u30fc\u30dc\u30fc\u30c9\u306e\u8a2d\u5b9a","text":"<ol> <li> <p>\u4ee5\u4e0b\u306e\u30b3\u30de\u30f3\u30c9\u3092\u6253\u3064\u3002 <pre><code>sudo dpkg-reconfigure keyboard-configuration\n</code></pre></p> </li> <li> <p><code>Apple Aluminium (JIS)</code>\u3092\u9078\u629e\u3059\u308b\u3002</p> </li> <li> <p><code>Japanese</code>\u3092\u9078\u629e\u3059\u308b\u3002</p> </li> <li> <p><code>Japanese - Japanese (Macintosh)</code>\u3092\u9078\u629e\u3059\u308b\u3002</p> </li> <li> <p><code>No toggling</code>\u3092\u9078\u629e\u3059\u308b\u3002</p> </li> <li> <p><code>No temporary switch</code>\u3092\u9078\u629e\u3059\u308b\u3002</p> </li> <li> <p><code>The default for the keyboard layout</code>\u3092\u9078\u629e\u3059\u308b\u3002</p> </li> <li> <p><code>No compose key</code>\u3092\u9078\u629e\u3059\u308b\u3002</p> </li> <li> <p><code>No</code>\u3092\u9078\u629e\u3059\u308b\u3002</p> </li> </ol> <p>\u3053\u306e\u307e\u307e\u3060\u3068\u300c\u304b\u306a\u300d\u3068\u300c\u82f1\u6570\u300d\u306e\u6319\u52d5\u304c\u9006\u306b\u306a\u3063\u3066\u3044\u308b\u305f\u3081\u3001Mozc\u306e\u8a2d\u5b9a\u3067\u7121\u7406\u3084\u308a\u9006\u306b\u3059\u308b\u3002</p>"},{"location":"articles/config-apple-magic-keyboard-in-ubuntu/#mozc\u306e\u8a2d\u5b9a","title":"Mozc\u306e\u8a2d\u5b9a","text":"<p>\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u3001\u30ad\u30fc\u30de\u30c3\u30d7\u3092\u5909\u66f4\u3059\u308b\u3002<code>Deactivate IME</code>\u306b\u3057\u3066\u3044\u308b\u306e\u306f\u534a\u89d2\u82f1\u6570\u3067\u306e\u5165\u529b\u6642\u306b\u5909\u63db\u3092\u7121\u52b9\u306b\u3059\u308b\u305f\u3081\u3002</p> Mode Key Command DirectInput Eisu Set input mode to Hiragana Precomposition Eisu Set input mode to Hiragana Composition Eisu Set input mode to Hiragana Conversion Eisu Set input mode to Hiragana DirectInput Hiragana Deactivate IME Precomposition Hiragana Deactivate IME Composition Hiragana Deactivate IME Conversion Hiragana Deactivate IME <p>\u8a2d\u5b9a\u304c\u9006\u306a\u306e\u306f\u304b\u306a\u3068\u82f1\u6570\u304c\u30ad\u30fc\u30dc\u30fc\u30c9\u4e0a\u306e\u4f4d\u7f6e\u3068\u9006\u306a\u305f\u3081\u3002</p>"},{"location":"articles/config-apple-magic-keyboard-in-ubuntu/#xmodmap\u306e\u8a2d\u5b9a","title":"xmodmap\u306e\u8a2d\u5b9a","text":"<p><code>.Xmodmap</code>\u306b\u4ee5\u4e0b\u306e\u884c\u3092\u66f8\u3044\u3066<code>xmodmap .Xmodmap</code>\u3092\u5b9f\u884c\u3059\u308b\u3068\u3001<code>Shift</code>\u3068<code>_</code>\u3067\u30d0\u30c3\u30af\u30b9\u30e9\u30c3\u30b7\u30e5\u3092\u6253\u3066\u308b\u3088\u3046\u306b\u306a\u308b\u3002 \u3082\u3061\u308d\u3093\u3001<code>_</code>\u3092\u62bc\u305b\u3070<code>_</code>\u304c\u51fa\u308b\u3002 <pre><code>keycode 97 = underscore backslash underscore backslash\n</code></pre></p>"},{"location":"articles/config-apple-magic-keyboard-in-ubuntu/#ubuntu-2404\u306e\u5834\u5408","title":"Ubuntu 24.04\u306e\u5834\u5408","text":""},{"location":"articles/config-apple-magic-keyboard-in-ubuntu/#\u30ad\u30fc\u30dc\u30fc\u30c9\u306e\u8a2d\u5b9a_1","title":"\u30ad\u30fc\u30dc\u30fc\u30c9\u306e\u8a2d\u5b9a","text":"<p>Ubuntu 22.04\u306e\u30ad\u30fc\u30dc\u30fc\u30c9\u306e\u8a2d\u5b9a\u3068\u540c\u3058\u3088\u3046\u306b\u8a2d\u5b9a\u3059\u308b\u3002</p>"},{"location":"articles/config-apple-magic-keyboard-in-ubuntu/#xmodmap\u306e\u8a2d\u5b9a_1","title":"xmodmap\u306e\u8a2d\u5b9a","text":"<p>\u304b\u306a\u3001\u82f1\u6570\u3001Caps Lock\u304c\u6b63\u3057\u304f\u8a8d\u8b58\u3055\u308c\u306a\u304b\u3063\u305f\u305f\u3081\u3001<code>xmodmap</code>\u3067\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u5909\u66f4\u3059\u308b\u3002</p> <pre><code>keycode 97 = underscore backslash underscore backslash\nkeycode 130 = Hiragana Hiragana Hiragana Hiragana\nkeycode 131 = Eisu_toggle Eisu_toggle Eisu_toggle Eisu_toggle\nkeycode 66 = Caps_Lock Caps_Lock Caps_Lock Caps_Lock\n</code></pre>"},{"location":"articles/config-apple-magic-keyboard-in-ubuntu/#mozc\u306e\u8a2d\u5b9a_1","title":"Mozc\u306e\u8a2d\u5b9a","text":"<p><code>IBus</code>\u7528\u306e<code>Mozc</code>\u3068<code>Mozc</code>\u306eGUI\u30e6\u30fc\u30c6\u30a3\u30ea\u30c6\u30a3\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\u3002</p> <pre><code>sudo apt install ibus-mozc mozc-utils-gui\n</code></pre> <p>\u305d\u306e\u5f8c\u3001\u8a2d\u5b9a\u306e\u30ad\u30fc\u30dc\u30fc\u30c9\u306e\u300cAdd Input Source...\u300d\u304b\u3089\u300cJapanese (Mozc)\u300d\u3092\u8ffd\u52a0\u3059\u308b\u3002 \u305d\u3057\u3066\u3001\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u30ad\u30fc\u30de\u30c3\u30d7\u3092\u5909\u66f4\u3059\u308b\u3002</p> Mode Key Command DirectInput Hiragana Set input mode to Hiragana Precomposition Hiragana Set input mode to Hiragana Composition Hiragana Set input mode to Hiragana Conversion Hiragana Set input mode to Hiragana DirectInput Eisu Deactivate IME Precomposition Eisu Deactivate IME Composition Eisu Deactivate IME Conversion Eisu Deactivate IME"},{"location":"articles/config-apple-magic-keyboard-in-ubuntu/#\u53c2\u8003","title":"\u53c2\u8003","text":"<ol> <li>MacBook Air\u3067Ubuntu\u30ad\u30fc\u30dc\u30fc\u30c9\u30ec\u30a4\u30a2\u30a6\u30c8\u3092\u8a2d\u5b9a\u3059\u308b</li> </ol>"},{"location":"articles/gdb-get-stacktrace/","title":"gdb\u3067\u306e\u30b9\u30bf\u30c3\u30af\u30c8\u30ec\u30fc\u30b9\u306e\u81ea\u52d5\u53d6\u5f97","text":"<p>C++\u3067\u306f\u3001\u30bb\u30b0\u30e1\u30f3\u30c6\u30fc\u30b7\u30e7\u30f3\u9055\u53cd\u3084\u30a2\u30b5\u30fc\u30b7\u30e7\u30f3\u306e\u5931\u6557\u6642\u306e\u30b9\u30bf\u30c3\u30af\u30c8\u30ec\u30fc\u30b9\u3092\u53d6\u308b\u306b\u306f\u30c7\u30d0\u30c3\u30ac\u30fc\u3092\u4f7f\u3046\u5fc5\u8981\u304c\u3042\u308a\u3001\u901a\u5e38\u30a4\u30f3\u30bf\u30e9\u30af\u30c6\u30a3\u30d6\u306b\u64cd\u4f5c\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002 \u3053\u306e\u8a18\u4e8b\u3067\u306f\u3001\u4e88\u3081\u30d6\u30ec\u30fc\u30af\u30dd\u30a4\u30f3\u30c8(\u6b63\u78ba\u306b\u306f\u30ad\u30e3\u30c3\u30c1\u30dd\u30a4\u30f3\u30c8)\u3092\u8a2d\u5b9a\u3057\u3066\u304a\u304f\u3053\u3068\u3067\u3053\u308c\u3089\u304c\u767a\u751f\u3057\u305f\u3068\u304d\u306b\u30b9\u30bf\u30c3\u30af\u30c8\u30ec\u30fc\u30b9\u3092\u51fa\u529b\u3057\u3066\u7d42\u4e86\u3059\u308b\u65b9\u6cd5\u3092\u7d39\u4ecb\u3057\u307e\u3059\u3002 GitHub Actions\u306a\u3069CI\u3067\u4f7f\u3046\u3068\u4fbf\u5229\u3060\u3068\u601d\u3044\u307e\u3059\u3002</p> <p>\u4f8b\u3068\u3057\u3066\u3001\u4ee5\u4e0b\u306e\u5358\u7d14\u306a\u30d7\u30ed\u30b0\u30e9\u30e0\u3092\u8003\u3048\u307e\u3059\u3002</p> fail_assert.cpp<pre><code>#include &lt;cassert&gt;\n\nint main() {\n    assert(false);\n}\n</code></pre> <p>\u6b21\u306b\u3001\u4ee5\u4e0b\u306e\u3088\u3046\u306agdb\u306e\u30b3\u30de\u30f3\u30c9\u3092\u66f8\u3044\u305f\u30c6\u30ad\u30b9\u30c8\u30d5\u30a1\u30a4\u30eb\u3092\u7528\u610f\u3057\u307e\u3059\u3002</p> cmds.txt<pre><code>set pagination off\ncatch signal SIGABRT SIGSEGV\ncommands 1\n  bt\nend\nr\nq\n</code></pre> <p>1\u884c\u76ee\u306f\u30da\u30fc\u30b8\u533a\u5207\u308a\u3092\u30aa\u30d5\u306b\u3057\u3066\u3044\u307e\u3059\u3002 <code>catch signal</code>\u3067\u30bb\u30b0\u30e1\u30f3\u30c6\u30fc\u30b7\u30e7\u30f3\u9055\u53cd\u3068\u30a2\u30b5\u30fc\u30b7\u30e7\u30f3\u306e\u5931\u6557\u6642\u306b\u51fa\u308b\u30b7\u30b0\u30ca\u30eb\u3092\u6355\u307e\u3048\u307e\u3059\u3002 <code>commands 1</code>\u301c<code>end</code>\u306e\u90e8\u5206\u306f\u76f4\u524d\u306b\u8a2d\u5b9a\u3057\u305f\u30ad\u30e3\u30c3\u30c1\u30dd\u30a4\u30f3\u30c8\u306e\u756a\u53f7\u3092\u6307\u5b9a\u3057\u3066\u3001\u30b7\u30b0\u30ca\u30eb\u3092\u6355\u307e\u3048\u305f\u6642\u306b\u30b9\u30bf\u30c3\u30af\u30c8\u30ec\u30fc\u30b9\u3092\u53d6\u5f97\u3059\u308b\u3088\u3046\u6307\u793a\u3057\u3066\u3044\u307e\u3059\u3002 \u305d\u3057\u3066\u3001\u4ee5\u4e0b\u306e\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3057\u307e\u3059\u3002</p> <pre><code>g++ -g -O0 fail_assert.cpp -o fail_assert\ngdb -x cmds.txt -q fail_assert\n</code></pre> <p><code>-x</code>\u306bgdb\u306e\u30b3\u30de\u30f3\u30c9\u304c\u66f8\u304b\u308c\u305f\u30c6\u30ad\u30b9\u30c8\u30d5\u30a1\u30a4\u30eb\u3092\u6307\u5b9a\u3059\u308b\u3053\u3068\u3067\u3001\u305d\u306e\u30d5\u30a1\u30a4\u30eb\u5185\u306e\u30b3\u30de\u30f3\u30c9\u3092\u9806\u306b\u5b9f\u884c\u3055\u305b\u307e\u3059\u3002 \u307e\u305f\u3001<code>-q</code>\u3067\u4e0d\u8981\u306a\u51fa\u529b\u3092\u6d88\u3057\u3066\u3044\u307e\u3059\u3002 \u5b9f\u884c\u3059\u308b\u3068\u3001\u4ee5\u4e0b\u306e\u3088\u3046\u306a\u30b9\u30bf\u30c3\u30af\u30c8\u30ec\u30fc\u30b9\u3092\u542b\u3093\u3060\u51fa\u529b\u304c\u5f97\u3089\u308c\u308b\u306f\u305a\u3067\u3059\u3002</p> <pre><code>Reading symbols from fail_assert...\nCatchpoint 1 (signals SIGABRT SIGSEGV)\n\n[Thread debugging using libthread_db enabled]\nUsing host libthread_db library \"/lib/x86_64-linux-gnu/libthread_db.so.1\".\nfail_assert: fail_assert.cpp:4: int main(): Assertion `false' failed.\n\nCatchpoint 1 (signal SIGABRT), __pthread_kill_implementation (no_tid=0, signo=6, threadid=&lt;optimized out&gt;)\n    at ./nptl/pthread_kill.c:44\nwarning: 44     ./nptl/pthread_kill.c: No such file or directory\n#0  __pthread_kill_implementation (no_tid=0, signo=6, threadid=&lt;optimized out&gt;) at ./nptl/pthread_kill.c:44\n#1  __pthread_kill_internal (signo=6, threadid=&lt;optimized out&gt;) at ./nptl/pthread_kill.c:78\n#2  __GI___pthread_kill (threadid=&lt;optimized out&gt;, signo=signo@entry=6) at ./nptl/pthread_kill.c:89\n#3  0x00007ffff7c4526e in __GI_raise (sig=sig@entry=6) at ../sysdeps/posix/raise.c:26\n#4  0x00007ffff7c288ff in __GI_abort () at ./stdlib/abort.c:79\n#5  0x00007ffff7c2881b in __assert_fail_base (fmt=0x7ffff7dd01e8 \"%s%s%s:%u: %s%sAssertion `%s' failed.\\n%n\", \n    assertion=assertion@entry=0x55555555601f \"false\", file=file@entry=0x55555555600f \"fail_assert.cpp\", \n    line=line@entry=4, function=function@entry=0x555555556004 \"int main()\") at ./assert/assert.c:94\n#6  0x00007ffff7c3b507 in __assert_fail (assertion=0x55555555601f \"false\", \n    file=0x55555555600f \"fail_assert.cpp\", line=4, function=0x555555556004 \"int main()\")\n    at ./assert/assert.c:103\n#7  0x0000555555555179 in main () at fail_assert.cpp:4\nA debugging session is active.\n\n        Inferior 1 [process 10899] will be killed.\n\nQuit anyway? (y or n) [answered Y; input not from terminal]\n</code></pre> <p>\u3053\u3053\u3067\u306f\u30b3\u30de\u30f3\u30c9\u3092\u5217\u6319\u3057\u305f\u3060\u3051\u3067\u3057\u305f\u304c\u3001if\u6587\u3084while\u6587\u3082\u4f7f\u3048\u308b\u306e\u3067\u3088\u308a\u8907\u96d1\u306a\u3053\u3068\u3082\u51fa\u6765\u307e\u3059\u3002</p>"},{"location":"articles/gdb-get-stacktrace/#\u53c2\u8003\u6587\u732e","title":"\u53c2\u8003\u6587\u732e","text":"<ol> <li>5.1.3 Setting Catchpoints</li> <li>23.1.3 Command Files</li> </ol>"},{"location":"articles/how-to-use-alembic/","title":"Alembic\u306e\u4f7f\u3044\u65b9","text":"<p>\u3053\u306e\u8a18\u4e8b\u306fAlembic\u306ev1.8.3\u3092\u53c2\u7167\u3057\u3066\u3044\u307e\u3059\u3002 \u610f\u5473\u304c\u308f\u304b\u3089\u306a\u304f\u3066\u3082\u6700\u5f8c\u307e\u3067\u76ee\u3092\u901a\u3057\u3066\u304b\u3089\u3001\u3082\u3046\u4e00\u5ea6\u8aad\u3080\u3053\u3068\u3092\u304a\u52e7\u3081\u3057\u307e\u3059\u3002 \u79c1\u304c\u7406\u89e3\u3057\u3066\u3044\u308b<code>PolyMesh</code>(\u30dd\u30ea\u30b4\u30f3\u30e1\u30c3\u30b7\u30e5)\u3068<code>Xform</code>(\u30e1\u30c3\u30b7\u30e5\u306e\u5909\u5f62)\u306b\u95a2\u9023\u3059\u308b\u9805\u76ee\u306e\u307f\u53d6\u308a\u4e0a\u3052\u307e\u3059\u3002</p> <p>\u307e\u305f\u3001alembic for realtime rendering\u3084Alembic\u521d\u671f\u306e\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8alembic - AlembicPoint9UsersGuide.wiki\u3092\u8aad\u3080\u3068\u826f\u3044\u304b\u3082\u3057\u308c\u307e\u305b\u3093\u3002</p>"},{"location":"articles/how-to-use-alembic/#alembic\u3068\u306f","title":"Alembic\u3068\u306f","text":"<p>Alembic\u306f\u30ec\u30f3\u30c0\u30ea\u30f3\u30b0\u3084\u7269\u7406\u30b7\u30df\u30e5\u30ec\u30fc\u30b7\u30e7\u30f3\u306a\u3069\u3092\u884c\u30463DCG\u30bd\u30d5\u30c8\u30a6\u30a7\u30a2\u9593\u3067\u3084\u308a\u3068\u308a\u51fa\u6765\u308b\u3001 \u6642\u9593\u3054\u3068\u306e\u7269\u4f53\u306e\u5e7e\u4f55\u60c5\u5831\u3092\u4fdd\u5b58\u3057\u305f\u30aa\u30fc\u30d7\u30f3\u30bd\u30fc\u30b9\u306e\u30d5\u30a1\u30a4\u30eb\u5f62\u5f0f\u3067\u3042\u308b\u3002</p>"},{"location":"articles/how-to-use-alembic/#\u30e9\u30a4\u30d6\u30e9\u30ea\u306e\u69cb\u6210","title":"\u30e9\u30a4\u30d6\u30e9\u30ea\u306e\u69cb\u6210","text":"<p>Alembic\u306f\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u6a5f\u80fd\u6bce\u306b\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3068\u540d\u524d\u7a7a\u9593\u304c\u5206\u3051\u3089\u308c\u3066\u3044\u308b\u3002 \u4ee5\u4e0b\u306e\u8868\u306b\u5fc5\u8981\u306a\u3082\u306e\u3060\u3051\u3092\u629c\u7c8b\u3057\u305f\u3002</p> \u540d\u524d\u7a7a\u9593 \u5185\u5bb9 Abc Alembic\u306e\u57fa\u672c\u7684\u306a\u30a4\u30f3\u30bf\u30fc\u30d5\u30a7\u30a4\u30b9\u3092\u63d0\u4f9b\u3059\u308b AbcCoreAbstract \u6642\u9593\u306b\u95a2\u3059\u308b\u30af\u30e9\u30b9\u4ee5\u5916\u30e6\u30fc\u30b6\u30fc\u304c\u898b\u308b\u5fc5\u8981\u306f\u306a\u3044 AbcCoreHDF5 HDF5\u3092\u30d5\u30a1\u30a4\u30eb\u5f62\u5f0f\u306b\u4f7f\u3063\u305f\u5834\u5408\u306e\u5165\u51fa\u529b\u306e\u5b9f\u88c5 AbcCoreLayer Alembic\u30d5\u30a1\u30a4\u30eb\u3078\u306e\u5909\u66f4\u3092\u5225\u306eAlembic\u30d5\u30a1\u30a4\u30eb\u306b\u66f8\u304d\u8fbc\u3093\u3060\u308a\u3001\u8907\u6570\u306eAlembic\u30d5\u30a1\u30a4\u30eb\u3092\u8aad\u307f\u8fbc\u3093\u3067\u4e00\u3064\u306eAlembic\u30d5\u30a1\u30a4\u30eb\u306b\u307e\u3068\u3081\u308b\u6a5f\u80fd\u306e\u5b9f\u88c5 AbcCoreOgawa Ogawa\u3092\u30d5\u30a1\u30a4\u30eb\u5f62\u5f0f\u306b\u4f7f\u3063\u305f\u5834\u5408\u306e\u5165\u51fa\u529b\u306e\u5b9f\u88c5 AbcGeom Abc\u3092\u4f7f\u3063\u3066\u3001\u7269\u4f53\u306e\u5e7e\u4f55\u60c5\u5831\u3084\u525b\u4f53\u5909\u5f62\u3092\u5b9f\u88c5\u3057\u3066\u3044\u308b"},{"location":"articles/how-to-use-alembic/#\u30d5\u30a1\u30a4\u30eb\u306e\u5165\u51fa\u529b\u306b\u3064\u3044\u3066","title":"\u30d5\u30a1\u30a4\u30eb\u306e\u5165\u51fa\u529b\u306b\u3064\u3044\u3066","text":"<p>Ogawa\u306fHDF5\u3088\u308a\u30b7\u30f3\u30b0\u30eb\u30b9\u30ec\u30c3\u30c9\u3060\u3068\u5e73\u5747\u30675\u500d\u3001\u30de\u30eb\u30c1\u30b9\u30ec\u30c3\u30c9\u3060\u3068\u540c\u3058\u64cd\u4f5c\u3092\u884c\u3063\u305f\u5834\u5408\u3068\u6bd4\u8f03\u3057\u306625\u500d\u901f\u304f\u8aad\u307f\u8fbc\u3080\u3002 \u307e\u305f\u3001\u30d5\u30a1\u30a4\u30eb\u30b5\u30a4\u30ba\u304c\u5e73\u5747\u30675-15%\u5c0f\u3055\u304f\u306a\u308a\u3001\u5c0f\u3055\u3044\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u304c\u591a\u3044\u307b\u3069\u30d5\u30a1\u30a4\u30eb\u30b5\u30a4\u30ba\u3082\u5c0f\u3055\u304f\u306a\u308b\u3002 \u7279\u306b\u7406\u7531\u304c\u306a\u3051\u308c\u3070\u3001Ogawa\u3092\u4f7f\u3046\u3053\u3068\u3092\u304a\u52e7\u3081\u3059\u308b\u3002</p>"},{"location":"articles/how-to-use-alembic/#abccorelayer\u3067\u51fa\u6765\u308b\u3053\u3068","title":"AbcCoreLayer\u3067\u51fa\u6765\u308b\u3053\u3068","text":"<p>\u4ee5\u4e0b\u306e\u8868\u306b\u5217\u6319\u3059\u308b\u3002</p> \u51fa\u6765\u308b\u3053\u3068 \u4f8b \u5f62\u72b6\u306b\u8ffd\u52a0\u306e\u30d7\u30ed\u30d1\u30c6\u30a3\u3092\u8ffd\u52a0\u3067\u304d\u308b UV\u304c\u306a\u3044\u30dd\u30ea\u30b4\u30f3\u30e1\u30c3\u30b7\u30e5\u306bUV\u3092\u8ffd\u52a0 \u30d7\u30ed\u30d1\u30c6\u30a3\u306e\u4e0a\u66f8\u304d \u30dd\u30ea\u30b4\u30f3\u30e1\u30c3\u30b7\u30e5\u4e0a\u306e\u9759\u7684\u306a\u70b9\u3092\u52d5\u304f\u70b9\u306b\u5909\u66f4 \u65b0\u3057\u3044\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u306e\u8ffd\u52a0 \u65b0\u3057\u3044\u5f62\u72b6\u3092\u65e2\u5b58\u306e\u968e\u5c64\u306b\u8ffd\u52a0 \u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u306e\u524a\u9664 \u597d\u307f\u3058\u3083\u306a\u3044\u5f62\u72b6\u3084\u968e\u5c64\u306e\u30d6\u30e9\u30f3\u30c1\u5168\u4f53\u306e\u524a\u9664 \u30d7\u30ed\u30d1\u30c6\u30a3\u306e\u524a\u9664 \u4e0d\u6b63\u306a\u6cd5\u7dda\u306e\u524a\u9664 \u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u968e\u5c64\u306e\u7f6e\u304d\u63db\u3048 \u5206\u3051\u3089\u308c\u305f\u66f2\u7dda\u306e\u30b0\u30eb\u30fc\u30d7\u3092\u4e00\u3064\u306e\u5927\u304d\u306a\u66f2\u7dda\u306b\u7f6e\u304d\u63db\u3048\u308b \u30d7\u30ed\u30d1\u30c6\u30a3\u968e\u5c64\u306e\u7f6e\u304d\u63db\u3048 \u30e6\u30fc\u30b6\u30fc\u30d7\u30ed\u30d1\u30c6\u30a3\u5185\u306e\u30d7\u30ed\u30d1\u30c6\u30a3\u3092\u4ed6\u306e\u30d7\u30ed\u30d1\u30c6\u30a3\u306b\u7f6e\u304d\u63db\u3048\u308b <p>\u307e\u305f\u3001Alembic\u30d5\u30a1\u30a4\u30eb\u306f\u8ffd\u8a18\u304c\u51fa\u6765\u306a\u3044\u305f\u3081\u3001<code>Points</code>\u306a\u3069\u6642\u7cfb\u5217\u3067\u4fdd\u5b58\u3067\u304d\u306a\u3044\u5834\u5408\u306f\u6642\u7cfb\u5217\u9806\u306b\u30d5\u30a1\u30a4\u30eb\u306b\u540d\u524d\u3092\u4ed8\u3051\u3066\u3001\u3053\u306e\u6a5f\u80fd\u3067\u8aad\u307f\u8fbc\u3080\u3068\u826f\u3044\u3002</p> <p>AbcCoreLayer\u306f<code>MetaData</code>\u3092\u9069\u5207\u306b\u8a2d\u5b9a\u3059\u308b\u305f\u3081\u306b\u3001<code>Util.h</code>\u5185\u306b<code>SetPrune</code>\u3068<code>SetReplace</code>\u3068\u3044\u3046\u4fbf\u5229\u306a\u95a2\u6570\u3092\u63d0\u4f9b\u3057\u3066\u3044\u308b\u3089\u3057\u3044\u3002</p>"},{"location":"articles/how-to-use-alembic/#\u4e3b\u306a\u6982\u5ff5","title":"\u4e3b\u306a\u6982\u5ff5","text":"<p>Alembic\u3067\u306f\u3001\u5165\u529b\u6642\u306b\u4f7f\u3046\u30af\u30e9\u30b9\u306b\u306f<code>I</code>\u304c\u3001\u51fa\u529b\u6642\u306b\u4f7f\u3046\u3082\u306e\u306b\u306f<code>O</code>\u304c\u540d\u524d\u306e\u5148\u982d\u306b\u4ed8\u304f\u3002 \u3053\u3053\u3067\u306f\u533a\u5225\u3059\u308b\u5fc5\u8981\u304c\u306a\u3044\u305f\u3081\u3001\u7701\u7565\u3059\u308b\u3002</p>"},{"location":"articles/how-to-use-alembic/#archive","title":"<code>Archive</code>","text":"<p>\u30c7\u30a3\u30b9\u30af\u4e0a\u306e\u5b9f\u969b\u306e\u30d5\u30a1\u30a4\u30eb\u3002 \u3059\u3079\u3066\u306e\u30b7\u30fc\u30f3\u30c7\u30fc\u30bf\u3092\u6301\u3064\u30c8\u30c3\u30d7\u30ec\u30d9\u30eb\u306e\u30b3\u30f3\u30c6\u30ca\u3002 1\u3064\u306e<code>Object</code>\u3092\u6301\u3064\u3002</p>"},{"location":"articles/how-to-use-alembic/#object","title":"<code>Object</code>","text":"<p>Alembic\u306e\u968e\u5c64\u306e\u4e3b\u306a\u5358\u4f4d\u3002 <code>Object</code>\u306f<code>Archive</code>\u306e<code>Object</code>\u3092\u30eb\u30fc\u30c8\u3068\u3057\u305f\u591a\u5206\u6728\u306b\u306a\u3063\u3066\u304a\u308a\u3001\u89aa\u3068\u5b50\u4f9b\u305f\u3061\u3092\u53d6\u5f97\u3059\u308b\u3053\u3068\u304c\u51fa\u6765\u308b\u3002 1\u3064\u306e<code>CompoundProperty</code>\u3092\u6301\u3064\u3002 <code>ObjectHeader</code>\u3068\u547c\u3070\u308c\u308b\u30e1\u30bf\u30c7\u30fc\u30bf\u3092\u6301\u3061\u3001<code>SchemaObject</code>\u3092\u5224\u5b9a\u3059\u308b\u305f\u3081\u306b\u4f7f\u308f\u308c\u308b\u3002</p>"},{"location":"articles/how-to-use-alembic/#schema","title":"<code>Schema</code>","text":"<p>\u30dd\u30ea\u30b4\u30f3\u30e1\u30c3\u30b7\u30e5\u3088\u3046\u306a\u3001\u3042\u308b\u8907\u96d1\u306a\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3092\u5b9f\u88c5\u3059\u308b\u305f\u3081\u306b\u4f5c\u3089\u308c\u305f<code>CompoundProperty</code>\u3002</p>"},{"location":"articles/how-to-use-alembic/#schemaobject","title":"<code>SchemaObject</code>","text":"<p><code>Schema</code>\u3092<code>CompundProperty</code>\u3068\u3057\u3066\u6301\u3064<code>Object</code>\u306e\u3053\u3068\u3002</p>"},{"location":"articles/how-to-use-alembic/#property","title":"Property","text":"<p>Simple\u3068Compound\u306e2\u7a2e\u985e\u306e\u578b\u304c\u3042\u308b\u3002 \u5024\u3092\u53d6\u5f97\u3059\u308b\u306b\u306f<code>SampleSelector</code>\u3068\u3044\u3046\u3001\u3042\u308b\u6642\u70b9\u306e\u6642\u523b\u3092\u8868\u3059\u30af\u30e9\u30b9\u3092\u4e0e\u3048\u308b\u5fc5\u8981\u304c\u3042\u308b\u3002</p>"},{"location":"articles/how-to-use-alembic/#simple-property","title":"Simple Property","text":"<p>Scalar\u3068Array\u306e2\u7a2e\u985e\u3042\u308b\u3002</p>"},{"location":"articles/how-to-use-alembic/#scalarproperty","title":"<code>ScalarProperty</code>","text":"<p>\u578b\u3068\u8981\u7d20\u306e\u6570\u304c\u56fa\u5b9a\u3055\u308c\u3001\u30b3\u30f3\u30d1\u30a4\u30eb\u6642\u306b\u6c7a\u307e\u308b\u8907\u6570\u306eSample\u3092\u6301\u3064\u3002 \u4f8b\u3068\u3057\u3066\u3001\u4ee5\u4e0b\u304c\u3042\u308b\u3002</p> <ul> <li>FloatProperty (\u5404Sample\u306f32\u30d3\u30c3\u30c8\u306e\u6d6e\u52d5\u5c0f\u6570\u70b9\u6570; \u9577\u3055 1)</li> <li>StringProperty (\u5404Sample\u306f\u4efb\u610f\u306e\u9577\u3055\u3092\u6301\u3064\u30011\u3064\u306estring; \u9577\u3055 1)</li> <li>M44dProperty (\u5404Sample\u306f16\u500b\u306e64\u30d3\u30c3\u30c8\u306e\u6d6e\u52d5\u5c0f\u6570\u70b9\u6570; \u9577\u3055 16)</li> <li>\u4ee5\u4e0b\u306e3\u3064\u306eSample\u3092\u6301\u3064Property<ul> <li>\u525b\u4f53\u306e\u8cea\u91cf(1\u3064\u306e\u6570\u5024; \u9577\u3055 1)</li> <li>\u8272(\u5024\u304c\u6d6e\u52d5\u5c0f\u6570\u70b9\u6570\u306eRGB\u306e\u30d9\u30af\u30c8\u30eb;\u9577\u3055 3)</li> <li>\u30d0\u30a6\u30f3\u30c7\u30a3\u30f3\u30b0\u30dc\u30c3\u30af\u30b9(\u5024\u304c\u6d6e\u52d5\u5c0f\u6570\u70b9\u6570\u306e2\u3064\u306e3\u6b21\u5143\u30d9\u30af\u30c8\u30eb; \u9577\u3055 6)</li> </ul> </li> </ul> <p>ScalarProperty\u306e\u6700\u5927\u306e\u9577\u3055\u306f256\u3067\u3042\u308b\u3002</p>"},{"location":"articles/how-to-use-alembic/#typedarrayproperty","title":"<code>TypedArrayProperty</code>","text":"<p>\u6642\u523b\u6bce\u306e<code>Sample</code>\u3092\u6301\u3064<code>Property</code>\u3002 <code>ArrayProperty</code>\u3082\u3042\u308b\u304c\u3001\u4e3b\u306b\u4f7f\u3046\u306e\u306f\u3053\u3063\u3061\u306e\u65b9\u3002 \u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u30d1\u30e9\u30e1\u30fc\u30bf\u306b\u5024\u306e\u578b(\u6b63\u78ba\u306b\u306fTypedPropertyTraits.h\u3067\u5b9a\u7fa9\u3055\u308c\u305f\u578b)\u304c\u5165\u3063\u3066\u3044\u308b\u3002 \u4f8b\u3068\u3057\u3066\u3001\u4ee5\u4e0b\u304c\u3042\u308b\u3002</p> <ul> <li><code>DoubleArrayProperty</code> (\u5404\u6642\u523b\u3067\u3001\u8981\u7d20\u304c1\u3064\u306e64\u30d3\u30c3\u30c8\u306e\u6d6e\u52d5\u5c0f\u6570\u70b9\u6570\u306e\u914d\u5217\u3092\u6301\u3064)</li> <li><code>V3fArrayProperty</code> (\u5404\u6642\u523b\u3067\u3001\u8981\u7d20\u304c1\u3064\u306e<code>Imath::Vec3f</code>(3\u3064\u306e32\u30d3\u30c3\u30c8\u306e\u6d6e\u52d5\u5c0f\u6570\u70b9\u6570)\u306e\u914d\u5217\u3092\u6301\u3064)</li> <li><code>M44fArrayProperty</code> (\u5404\u6642\u523b\u3067\u3001\u8981\u7d20\u304c1\u3064\u306e<code>Imath::M44f</code>(16\u500b\u306e32\u30d3\u30c3\u30c8\u306e\u6d6e\u52d5\u5c0f\u6570\u70b9\u6570)\u306e\u914d\u5217\u3092\u6301\u3064)</li> <li>\u591a\u89d2\u5f62\u30e1\u30c3\u30b7\u30e5\u306e\u9802\u70b9\u306e\u30ea\u30b9\u30c8</li> <li>\u6d41\u4f53\u30b7\u30df\u30e5\u30ec\u30fc\u30b7\u30e7\u30f3\u306e\u7c92\u5b50\u306e\u30ea\u30b9\u30c8</li> </ul> <p>\u305f\u3060\u3057\u3001\u540c\u3058Sample\u3092\u4fdd\u5b58\u3057\u306a\u3044\u3002</p>"},{"location":"articles/how-to-use-alembic/#compoundproperty","title":"<code>CompoundProperty</code>","text":"<p>(<code>CompoundProperty</code>\u3092\u542b\u3080)\u8907\u6570\u306eProperty\u3092\u6301\u3064Property\u3002</p>"},{"location":"articles/how-to-use-alembic/#sample","title":"Sample","text":"<p>\u3042\u308b\u6642\u523b\u306e\u751f\u306e\u30c7\u30fc\u30bf\u3002 Property\u3068\u540c\u69d8\u306b\u3001Sample\u3082Scalar\u3068Array\u306e2\u7a2e\u985e\u3042\u308b\u3002 \u4f8b\u3068\u3057\u3066\u3001\u4ee5\u4e0b\u304c\u3042\u308b\u3002</p> <ul> <li><code>DoubleArraySample</code> (\u8981\u7d20\u304c1\u3064\u306e64\u30d3\u30c3\u30c8\u306e\u6d6e\u52d5\u5c0f\u6570\u70b9\u6570\u306e\u914d\u5217)</li> <li><code>V3fArraySample</code> (\u8981\u7d20\u304c1\u3064\u306e<code>Imath::Vec3f</code>(3\u3064\u306e32\u30d3\u30c3\u30c8\u306e\u6d6e\u52d5\u5c0f\u6570\u70b9\u6570)\u306e\u914d\u5217)</li> <li><code>M44fArraySample</code> (\u8981\u7d20\u304c1\u3064\u306e<code>Imath::M44f</code>(16\u500b\u306e32\u30d3\u30c3\u30c8\u306e\u6d6e\u52d5\u5c0f\u6570\u70b9\u6570)\u306e\u914d\u5217)</li> </ul>"},{"location":"articles/how-to-use-alembic/#timesampling","title":"<code>TimeSampling</code>","text":"<p>Property\u304c\u6301\u3064\u6642\u9593\u3092\u7ba1\u7406\u3059\u308b\u30af\u30e9\u30b9\u3002 \u6642\u9593\u306e\u914d\u5217\u3068<code>TimeSamplingType</code>\u3092\u6301\u3064\u3002 <code>TimeSamplingType</code>\u306e\u7a2e\u985e\u306f\u4ee5\u4e0b\u306e\u901a\u308a\u3002</p> TimeSamplingType \u610f\u5473 Uniform (\u4e00\u69d8) Sample\u9593\u306e\u6642\u9593\u9593\u9694\u304c\u4e00\u5b9a Cyclic (\u5468\u671f\u7684) Sample\u9593\u306e\u6642\u9593\u9593\u9694\u304c\u5468\u671f\u7684\u306b\u5909\u5316\u3059\u308b Acyclic (\u4e0d\u898f\u5247) Sample\u9593\u306e\u6642\u9593\u9593\u9694\u304c\u4e0d\u898f\u5247\u306b\u5909\u5316\u3059\u308b"},{"location":"articles/how-to-use-alembic/#sampleselector","title":"<code>SampleSelector</code>","text":"<p>Property\u5185\u306eSample\u3092\u53d6\u5f97\u3059\u308b\u305f\u3081\u306b\u4f7f\u3046\u30af\u30e9\u30b9\u3002 <code>TimeSampling</code>\u304c\u6301\u3064\u6642\u9593\u306e\u914d\u5217\u306e\u30a4\u30f3\u30c7\u30c3\u30af\u30b9\u3092\u76f4\u63a5\u4e0e\u3048\u308b\u304b\u3001\u6642\u523b\u3092\u4e0e\u3048\u308b\u3053\u3068\u3067\u4f5c\u308b\u3002 \u6642\u523b\u3092\u6e21\u3059\u5834\u5408\u3001\u8ffd\u52a0\u3067<code>TimeIndexType</code>\u30d5\u30e9\u30b0\u3092\u6e21\u3059\u3053\u3068\u3082\u3067\u304d\u308b\u3002 <code>TimeIndexType</code>\u30d5\u30e9\u30b0\u306e\u610f\u5473\u306f\u4ee5\u4e0b\u306e\u901a\u308a\u3002</p> TimeIndexType \u610f\u5473 kNearIndex \u4e0e\u3048\u3089\u308c\u305f\u6642\u523b\u306b\u6700\u3082\u8fd1\u3044\u6642\u523b\u306e\u30a4\u30f3\u30c7\u30c3\u30af\u30b9 kFloorIndex \u4e0e\u3048\u3089\u308c\u305f\u6642\u523b\u3088\u308a\u5927\u304d\u304f\u306a\u3044\u3001\u6700\u5927\u306e\u6642\u523b\u306e\u30a4\u30f3\u30c7\u30c3\u30af\u30b9 kCeilIndex \u4e0e\u3048\u3089\u308c\u305f\u6642\u523b\u3088\u308a\u5c0f\u3055\u304f\u306a\u3044\u3001\u6700\u5c0f\u306e\u6642\u523b\u306e\u30a4\u30f3\u30c7\u30c3\u30af\u30b9"},{"location":"articles/how-to-use-alembic/#\u4e3b\u306a\u30b9\u30ad\u30fc\u30de\u30aa\u30d6\u30b8\u30a7\u30af\u30c8","title":"\u4e3b\u306a\u30b9\u30ad\u30fc\u30de\u30aa\u30d6\u30b8\u30a7\u30af\u30c8","text":""},{"location":"articles/how-to-use-alembic/#polymesh","title":"PolyMesh","text":"<p>\u30dd\u30ea\u30b4\u30f3\u30e1\u30c3\u30b7\u30e5\u3092\u7ba1\u7406\u3059\u308b\u30b9\u30ad\u30fc\u30de\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3002 \u6642\u523b\u6bce\u306b\u9802\u70b9\u3001\u9762\u3001\u9802\u70b9\u3084\u9762\u306e\u6cd5\u7dda\u3092\u6301\u3061\u3001UV\u3001\u9802\u70b9\u3054\u3068\u306e\u901f\u5ea6\u3001AABB\u3082\u6301\u3064\u3053\u3068\u304c\u51fa\u6765\u308b\u3002</p>"},{"location":"articles/how-to-use-alembic/#polymeshschema","title":"PolyMeshSchema","text":"<p><code>PolyMesh</code>\u306e\u30b9\u30ad\u30fc\u30de\u3067\u3001<code>PolyMesh</code>\u30af\u30e9\u30b9\u306e<code>getSchema</code>\u30e1\u30f3\u30d0\u95a2\u6570\u3067\u53d6\u5f97\u3067\u304d\u308b\u3002</p> <p>\u3053\u306e\u30af\u30e9\u30b9\u306e<code>getTopologyVariance</code>\u30e1\u30f3\u30d0\u95a2\u6570\u3067\u30dd\u30ea\u30b4\u30f3\u30e1\u30c3\u30b7\u30e5\u304c\u5909\u5316\u3059\u308b\u304b\u5224\u5b9a\u3067\u304d\u308b\u3002 \u4ee5\u4e0b\u306f\u623b\u308a\u5024\u3068\u305d\u306e\u610f\u5473\u306e\u8868\u3067\u3042\u308b\u3002 \u623b\u308a\u5024\u306f\u540d\u524d\u7a7a\u9593<code>Alembic::AbcGeom::MeshTopologyVariance</code>\u3092\u7701\u7565\u3057\u3066\u3044\u308b\u3002</p> \u623b\u308a\u5024 \u610f\u5473 kConstantTopology \u5909\u5316\u3057\u306a\u3044 kHomogen(e)ousTopology \u9802\u70b9\u306e\u4f4d\u7f6e\u306f\u5909\u308f\u308b\u304c\u3001\u30c8\u30dd\u30ed\u30b8\u30fc\u306f\u5909\u5316\u3057\u306a\u3044 kHeterogen(e)ousTopology \u9802\u70b9\u306e\u4f4d\u7f6e\u3082\u30c8\u30dd\u30ed\u30b8\u30fc\u3082\u5909\u5316\u3059\u308b <p><code>XformSchema</code>\u3068\u540c\u3058\u3088\u3046\u306b\u3001<code>getValue</code>\u30e1\u30f3\u30d0\u95a2\u6570\u3067\u3042\u308b\u6642\u523b\u306e\u30dd\u30ea\u30b4\u30f3\u30e1\u30c3\u30b7\u30e5\u3092\u53d6\u5f97\u3067\u304d\u308b\u304c\u3001\u3044\u304f\u3064\u304b\u6ce8\u610f\u70b9\u304c\u3042\u308b\u3002</p>"},{"location":"articles/how-to-use-alembic/#\u9762","title":"\u9762","text":"<p>Alembic\u3067\u306f\u3001\u4efb\u610f\u306e\u591a\u89d2\u5f62\u3092\u6301\u3064\u3053\u3068\u304c\u51fa\u6765\u308b\u3002 \u3064\u307e\u308a\u3001\u4e09\u89d2\u5f62\u3084\u56db\u89d2\u5f62\u3092\u6301\u3064\u30dd\u30ea\u30b4\u30f3\u30e1\u30c3\u30b7\u30e5\u3092Alembic\u306b\u4fdd\u5b58\u3067\u304d\u308b\u3002 \u3053\u306e\u3053\u3068\u3092\u5b9f\u73fe\u3059\u308b\u305f\u3081\u306b\u3001\u9762\u3092\u4ee5\u4e0b\u306e\u30ea\u30b9\u30c8\u3067\u8868\u73fe\u3057\u3066\u3044\u308b\u3002</p> <ol> <li>\u305d\u308c\u305e\u308c\u306e\u9762\u3092\u69cb\u6210\u3059\u308b\u9802\u70b9\u306e\u30a4\u30f3\u30c7\u30c3\u30af\u30b9\u3092\u6301\u30641\u6b21\u5143\u306e\u30ea\u30b9\u30c8</li> <li>\u305d\u308c\u305e\u308c\u306e\u9762\u306b\u542b\u307e\u308c\u308b\u9802\u70b9\u306e\u500b\u6570\u306e\u30ea\u30b9\u30c8</li> </ol> <p>1\u3064\u76ee\u306e\u30ea\u30b9\u30c8\u306f\u9762\u306e\u30a4\u30f3\u30c7\u30c3\u30af\u30b9\u3068\u30ea\u30b9\u30c8\u306e\u30a4\u30f3\u30c7\u30c3\u30af\u30b9\u3092\u5bfe\u5fdc\u3055\u305b\u305f2\u6b21\u5143\u306e\u30ea\u30b9\u30c8\u3092\u30d5\u30e9\u30c3\u30c8\u306b\u3057\u305f\u3082\u306e\u3067\u3082\u3042\u308b\u3002 \u5177\u4f53\u4f8b\u3068\u3057\u3066\u3001\u4e09\u89d2\u5f62\u3068\u56db\u89d2\u5f62\u3092\u305d\u308c\u305e\u308c1\u3064\u305a\u3064\u6301\u3061\u30011\u8fba\u3092\u5171\u6709\u3059\u308b\u30e1\u30c3\u30b7\u30e5\u306f\u4ee5\u4e0b\u306e\u901a\u308a\u3002</p> <ol> <li>[0, 1, 2, 1, 3, 4, 2]</li> <li>[3, 4]</li> </ol> <p>1\u3064\u76ee\u306e\u30ea\u30b9\u30c8\u3092\u6301\u3064Property\u306f<code>getFaceIndicesProperty</code>\u30e1\u30f3\u30d0\u95a2\u6570\u3067\u53d6\u5f97\u3067\u304d\u30012\u3064\u76ee\u306e\u30ea\u30b9\u30c8\u3092\u6301\u3064Property\u306f<code>getFaceIndicesProperty</code>\u30e1\u30f3\u30d0\u95a2\u6570\u3067\u53d6\u5f97\u3067\u304d\u308b\u3002</p>"},{"location":"articles/how-to-use-alembic/#\u6cd5\u7dda","title":"\u6cd5\u7dda","text":"<p>\u5b9f\u306f\u6cd5\u7dda\u3068UV\u306f\u3053\u308c\u307e\u3067\u8aac\u660e\u3057\u3066\u304d\u305f\u30af\u30e9\u30b9\u306e\u3069\u308c\u3067\u3082\u306a\u3044\u3002 \u6cd5\u7dda\u306f<code>TypedGeomParam</code>\u3068\u3044\u3046Schema\u306b\u4f3c\u305f\u3088\u3046\u306a\u30af\u30e9\u30b9\u306e\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u3067\u3001<code>PolyMeshSchema</code>\u30af\u30e9\u30b9\u306e<code>getNormalsParam</code>\u30e1\u30f3\u30d0\u95a2\u6570\u3067\u53d6\u5f97\u3067\u304d\u308b\u3002 \u6cd5\u7dda\u306e\u5024\u306e\u610f\u5473\u306f<code>TypedGeomParam</code>\u30af\u30e9\u30b9\u306e<code>getScope</code>\u306e\u623b\u308a\u5024\u306b\u3088\u3063\u3066\u7570\u306a\u308a\u3001\u4ee5\u4e0b\u306e\u901a\u308a\u3002</p> \u623b\u308a\u5024 \u610f\u5473 kConstantScope \u30dd\u30ea\u30b4\u30f3\u30e1\u30c3\u30b7\u30e5\u5168\u4f53\u30671\u3064\u3060\u3051\u306e\u5024 kUniformScope \u5404\u591a\u89d2\u5f62\u306b\u5bfe\u3057\u30661\u3064\u306e\u5024 kVaryingScope, kVertexScope \u5404\u591a\u89d2\u5f62\u306e\u9802\u70b9\u306b\u5bfe\u3057\u30661\u3064\u306e\u5024\u304c\u3042\u308a\u3001\u591a\u89d2\u5f62\u5185\u3067\u7dda\u5f62\u306b\u88dc\u9593\u3055\u308c\u308b kFacevaryingScope <code>kVaryingScope</code>\u3068\u540c\u69d8\u306b\u591a\u89d2\u5f62\u306e\u9802\u70b9\u306b1\u3064\u306e\u5024\u304c\u3042\u308a\u3001\u591a\u89d2\u5f62\u5185\u3067\u7dda\u5f62\u306b\u88dc\u9593\u3055\u308c\u308b\u304c\u3001\u591a\u89d2\u5f62\u306e\u9802\u70b9\u306e\u5024\u306f\u591a\u89d2\u5f62\u6bce\u306b\u7570\u306a\u3063\u3066\u3082\u3088\u3044 <p>\u6cd5\u7dda\u306e\u5024\u306e\u53d6\u5f97\u306f\u4ee5\u4e0b\u306e\u4f8b\u3092\u53c2\u7167\u3002</p>"},{"location":"articles/how-to-use-alembic/#xform","title":"Xform","text":"<p>\u5909\u5f62\u3092\u7ba1\u7406\u3059\u308b\u30b9\u30ad\u30fc\u30de\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3002 \u5b50\u306b\u5909\u5f62\u3055\u305b\u308b<code>PolyMesh</code>\u3084\u81ea\u8eab\u3092\u6301\u3064\u3002 <code>Xform</code>\u304c\u89aa\u5b50\u3067\u3042\u308b\u5834\u5408\u3001\u89aa\u304c\u5909\u5f62\u3055\u305b\u305f\u5f8c\u306b\u5b50\u4f9b\u304c\u5909\u5f62\u3055\u305b\u308b(\u30c6\u30b9\u30c8\u3092\u898b\u308b\u9650\u308a\u3001\u3053\u306e\u5909\u5f62\u3057\u304b\u898b\u5f53\u305f\u3089\u306a\u304b\u3063\u305f)\u3002 \u5909\u5f62\u306e\u9806\u5e8f\u306f<code>getInheritsXforms</code>\u95a2\u6570\u3067\u5224\u5b9a\u3067\u304d\u308b\u3002</p>"},{"location":"articles/how-to-use-alembic/#xformschema","title":"XformSchema","text":"<p><code>Xform</code>\u306e\u30b9\u30ad\u30fc\u30de\u3067\u3001<code>Xform</code>\u30af\u30e9\u30b9\u306e<code>getSchema</code>\u30e1\u30f3\u30d0\u95a2\u6570\u3067\u53d6\u5f97\u3067\u304d\u308b\u3002</p>"},{"location":"articles/how-to-use-alembic/#xformsample","title":"XformSample","text":"<p><code>XformSchema</code>\u30af\u30e9\u30b9\u306e<code>getValue</code>\u30e1\u30f3\u30d0\u95a2\u6570\u3067<code>XformSample</code>\u3092\u53d6\u5f97\u3067\u304d\u308b\u3002 <code>XformSample</code>\u306f<code>XformOp</code>\u306e\u30ea\u30b9\u30c8\u3092\u6301\u3064\u3002 <code>getNumOps</code>\u30e1\u30f3\u30d0\u95a2\u6570\u3067\u7dcf\u6570\u3092\u53d6\u5f97\u3057\u3001<code>operator[]</code>\u30e1\u30f3\u30d0\u95a2\u6570\u3067\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u3092\u53d6\u5f97\u3059\u308b\u3002</p> <p>\u76f4\u306b\u5024\u3092\u53d6\u5f97\u3059\u308b\u3053\u3068\u3082\u3067\u304d\u308b\u304c\u3001\u64cd\u4f5c\u304c\u8ffd\u52a0\u3055\u308c\u305f\u9806\u306b\u53d6\u308a\u51fa\u3055\u306a\u3051\u308c\u3070\u306a\u3089\u306a\u3044\u305f\u3081\u3001\u7528\u5fc3\u3057\u3066\u4f7f\u3046\u4e8b\u3002</p> <p><code>getNumOpChannels</code>\u30e1\u30f3\u30d0\u95a2\u6570\u3067\u81ea\u8eab\u304c\u6301\u3064<code>XformOp</code>\u306e<code>channel</code>\u306e\u7dcf\u6570\u304c\u308f\u304b\u308b\u3002</p>"},{"location":"articles/how-to-use-alembic/#xformop","title":"XformOp","text":"<p><code>XformOp</code>\u306f\u5e73\u884c\u79fb\u52d5\u3001\u56de\u8ee2\u3001\u62e1\u5927\u7e2e\u5c0f\u3001\u7dda\u5f62\u5909\u63db\u3092\u8868\u3059\u3002 \u64cd\u4f5c\u306e\u7a2e\u985e\u306f<code>getType</code>\u30e1\u30f3\u30d0\u95a2\u6570\u3067\u5224\u5b9a\u3067\u304d\u308b\u3002 \u5217\u6319\u5024\u3068\u610f\u5473\u306f\u4ee5\u4e0b\u306e\u901a\u308a\u3002</p> XformOperationType \u610f\u5473 kScaleOperation \u62e1\u5927\u7e2e\u5c0f kTranslateOperation \u5e73\u884c\u79fb\u52d5 kRotateOperation \u56de\u8ee2 kMatrixOperation \u884c\u5217 kRotateXOperation x\u8ef8\u56de\u8ee2 kRotateYOperation y\u8ef8\u56de\u8ee2 kRotateZOperation z\u8ef8\u56de\u8ee2 <p><code>XformOp</code>\u306f<code>channel</code>\u3068\u3044\u3046<code>double</code>\u306e\u30ea\u30b9\u30c8\u3092\u6301\u3061\u3001\u5404\u64cd\u4f5c\u3092\u8868\u73fe\u3059\u308b\u305f\u3081\u306b\u4f7f\u308f\u308c\u308b\u3002 \u5404\u64cd\u4f5c\u306e<code>channel</code>\u6570\u306f\u4ee5\u4e0b\u306e\u901a\u308a\u3002</p> \u64cd\u4f5c <code>channel</code>\u6570 \u5e73\u884c\u79fb\u52d5\u3068\u62e1\u5927\u7e2e\u5c0f 3 \u56de\u8ee2 4 \u884c\u5217 16 \u8ef8\u56de\u8ee2 1 <p>\u884c\u5217\u306f\u884c\u512a\u5148\u3067\u683c\u7d0d\u3055\u308c\u308b\u3002</p>"},{"location":"articles/how-to-use-alembic/#\u4f7f\u7528\u4f8b","title":"\u4f7f\u7528\u4f8b","text":""},{"location":"articles/how-to-use-alembic/#\u30dd\u30ea\u30b4\u30f3\u30e1\u30c3\u30b7\u30e5\u306e\u66f8\u304d\u8fbc\u307f","title":"\u30dd\u30ea\u30b4\u30f3\u30e1\u30c3\u30b7\u30e5\u306e\u66f8\u304d\u8fbc\u307f","text":"<p>\u5404\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306b\u306f\u3001\u305d\u306e\u30e9\u30a4\u30d6\u30e9\u30ea\u304c\u516c\u958b\u3057\u3066\u3044\u308b\u5168\u3066\u3092\u30a4\u30f3\u30af\u30eb\u30fc\u30c9\u3057\u305f<code>All.h</code>\u3068\u3044\u3046\u540d\u524d\u306e\u30d8\u30c3\u30c0\u30fc\u304c\u3042\u308b\u3002 \u306a\u306e\u3067\u3001\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u30a4\u30f3\u30af\u30eb\u30fc\u30c9\u3059\u308c\u3070\u3088\u3044\u3002</p> <pre><code>// Alembic Includes\n#include &lt;Alembic/AbcGeom/All.h&gt;\n#include &lt;Alembic/AbcCoreOgawa/All.h&gt;\n</code></pre> <p>\u6b21\u306b<code>Archive</code>\u3092\u4f5c\u308a\u3001\u305d\u306e<code>Archive</code>\u306e\u5b50\u4f9b\u3068\u3057\u3066\u3001\u9759\u7684\u306a\u30dd\u30ea\u30b4\u30f3\u30e1\u30c3\u30b7\u30e5\u3092\u6301\u3064\u30a2\u30cb\u30e1\u30fc\u30b7\u30e7\u30f3\u3092\u8ffd\u52a0\u3057\u3088\u3046\u3002 <pre><code>// \u30e1\u30bf\u30c7\u30fc\u30bf\u306e\u4f5c\u6210\nauto abc_metadata = Alembic::Abc::MetaData();\n// \u540d\u524d\u3092\"PolyMesh\"\u306b\u3059\u308b\u3002\nabc_metadata.set(Alembic::Abc::kUserDescriptionKey, \"PolyMesh\");\n\nauto archive_writer = Alembic::AbcCoreOgawa::WriteArchive();\nauto writer_ptr = archive_writer(\"polyMesh1.abc\", abc_metadata);\n// polyMesh1.abc\u3078\u66f8\u304d\u8fbc\u3081\u308barchive\u3092\u4f5c\u6210\nauto archive = Alembic::Abc::OArchive(writer_ptr);\n</code></pre></p> <p>\u7acb\u65b9\u4f53[-1, 1] x [-1, 1] x [-1, 1]\u306ePolyMesh Object\u3092\u4f5c\u6210\u3059\u308b\u3002\"meshy\"\u306f<code>meshyObj</code>\u306e\u540d\u524d\u3002 <pre><code>auto abc_top = archive.getTop();\nauto meshyObj = OPolyMesh(abc_top, \"meshy\");\n</code></pre></p> <p>UV\u3068\u6cd5\u7dda\u306eSample\u3092\u4f5c\u6210\u3059\u308b\u3002 \u305d\u306e\u524d\u306b\u3001UV\u306e\u540d\u524d\u306fSample\u306b\u5165\u308c\u308b\u524d\u306b\u4ed8\u3051\u308b\u5fc5\u8981\u304c\u3042\u308b\u3002 <pre><code>auto&amp; mesh = meshyObj.getSchema();\nmesh.setUVSourceName(\"test\");\n</code></pre></p> <p>UV\u3068\u6cd5\u7dda\u306f<code>GeomParams</code>\u3092\u4f7f\u3046\u3002 <code>GeomParams</code>\u306f\u30a4\u30f3\u30c7\u30c3\u30af\u30b9\u304c\u3042\u3063\u3066\u3082\u306a\u304f\u3066\u3082\u8aad\u307f\u66f8\u304d\u3067\u304d\u308b\u3002 <code>kFacevaryingScope</code>\u306b\u3064\u3044\u3066\u306f\u3001\u53c2\u8003\u6587\u732e\u306e3\u30014\u3092\u53c2\u8003\u3002 <pre><code>// \u7acb\u65b9\u4f53\u306e\u9802\u70b9\u306eUV\u3002\n// UV\u306e\u5024\u306f\u6307\u5b9a\u3057\u305f\u9762\u3092\u69cb\u6210\u3059\u308b\u9802\u70b9\u306e\u9806\u306b\u3001\u5404\u9762\u306e\u5404\u9802\u70b9\u306e\u5024\u3092\u5217\u6319\u3059\u308b\u3002\nextern const size_t g_numUVs;\nextern const Abc::float32_t g_uvs[];\nauto uvsamp = OV2fGeomParam::Sample(\n    V2fArraySample((const V2f *)g_uvs, g_numUVs), // reinterpret_cast\u3092\u4f7f\u3046\u3079\u304d\n    kFacevaryingScope\n);\n// \u7acb\u65b9\u4f53\u306e\u9802\u70b9\u306e\u6cd5\u7dda\n// \u6cd5\u7dda\u306e\u5024\u306f\u6307\u5b9a\u3057\u305f\u9762\u3092\u69cb\u6210\u3059\u308b\u9802\u70b9\u306e\u9806\u306b\u3001\u5404\u9762\u306e\u5404\u9802\u70b9\u306e\u5024\u3092\u5217\u6319\u3059\u308b\u3002\n// \u3053\u308c\u306f\u57fa\u672c\u7684\u306b\u306fRenderMan\u306e\"facevarying\"\u306e\u578b\u306b\u5408\u3046\u30b9\u30c8\u30ec\u30fc\u30b8\u3067\u3042\u308b\u3002\nextern const size_t g_numNormals;\nextern const Abc::float32_t g_normals[];\nauto nsamp = ON3fGeomParam::Sample(\n    N3fArraySample((const N3f *)g_normals, g_numNormals),\n    kFacevaryingScope\n);\n</code></pre></p> <p>\u30e1\u30c3\u30b7\u30e5\u306eSample\u3092\u8a2d\u5b9a\u3059\u308b\u3002 \u5f15\u6570\u306f\u5148\u982d\u304b\u3089\u9806\u306b\u3001\u9802\u70b9\u306e\u5ea7\u6a19\u3068\u9802\u70b9\u306e\u6570\u3001\u9762\u3092\u69cb\u6210\u3059\u308b\u9802\u70b9\u306e\u30a4\u30f3\u30c7\u30c3\u30af\u30b9\u306e\u30ea\u30b9\u30c8\u3068\u305d\u306e\u30ea\u30b9\u30c8\u306e\u30b5\u30a4\u30ba\u3001\u9762\u3092\u69cb\u6210\u3059\u308b\u9802\u70b9\u306e\u6570\u306e\u30ea\u30b9\u30c8\u3068\u305d\u306e\u30ea\u30b9\u30c8\u306e\u30b5\u30a4\u30ba\u3067\u3042\u308b\u3002 \u901f\u5ea6\u306f<code>OPolyMeshSchema::Sample</code>\u306e<code>setVelocityies</code>\u30e1\u30f3\u30d0\u95a2\u6570\u3067\u8a2d\u5b9a\u3059\u308b\u3002 <pre><code>auto mesh_samp = OPolyMeshSchema::Sample(\n    V3fArraySample((const V3f *)g_verts, g_numVerts),\n    Int32ArraySample(g_indices, g_numIndices),\n    Int32ArraySample(g_counts, g_numCounts),\n    uvsamp,\n    nsamp\n);\nmesh.set(mesh_samp);\n</code></pre></p> <p>Alembic\u306e\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u306f\u30b9\u30b3\u30fc\u30d7\u304b\u3089\u51fa\u308b\u3068\u304d\u306b\u81ea\u52d5\u7684\u306b\u7834\u68c4\u3055\u308c\u308b\u3002 \u306a\u306e\u3067\u3001\u7279\u306b\u4f55\u3082\u3057\u306a\u304f\u3066\u826f\u3044\u3002</p> <p>\u30d7\u30ed\u30b0\u30e9\u30e0\u5168\u4f53\u306f\u53c2\u8003\u6587\u732e\u306e2\u306b\u3042\u308b\u3002</p>"},{"location":"articles/how-to-use-alembic/#\u30dd\u30ea\u30b4\u30f3\u30e1\u30c3\u30b7\u30e5\u306e\u8aad\u307f\u8fbc\u307f","title":"\u30dd\u30ea\u30b4\u30f3\u30e1\u30c3\u30b7\u30e5\u306e\u8aad\u307f\u8fbc\u307f","text":"<p>\u30a4\u30f3\u30af\u30eb\u30fc\u30c9\u3059\u308b\u30d8\u30c3\u30c0\u30fc\u3068\u540d\u524d\u7a7a\u9593\u306f\u524d\u4f8b\u3092\u53c2\u7167\u3002</p> <p>\u8aad\u307f\u8fbc\u307f\u7528\u30a2\u30fc\u30ab\u30a4\u30d6\u3092\u4f5c\u6210\u3059\u308b\u3002 <pre><code>auto archive_reader = Alembic::AbcCoreOgawa::ReadArchive();\nauto reader_ptr = archive_reader(\"polyMesh1.abc\");\nauto archive = Alembic::Abc::IArchive(reader_ptr);\n</code></pre></p> <p>UV, \u6cd5\u7dda\u3092\u53d6\u5f97\u3059\u308b\u3002 <pre><code>auto meshyObj         = IPolyMesh(archive.getTop(), \"meshy\");\nIPolyMeshSchema&amp; mesh = meshyObj.getSchema();\nauto N                = mesh.getNormalsParam();\nauto uv               = mesh.getUVsParam();\n</code></pre></p> <p>\u9802\u70b9\u306e\u5ea7\u6a19\u306e\u30ea\u30b9\u30c8\u3001\u9762\u3092\u69cb\u6210\u3059\u308b\u9802\u70b9\u306e\u30a4\u30f3\u30c7\u30c3\u30af\u30b9\u306e\u30ea\u30b9\u30c8\u3001\u9762\u3092\u69cb\u6210\u3059\u308b\u9802\u70b9\u306e\u6570\u306e\u30ea\u30b9\u30c8\u3001AABB\u3001\u3082\u3057\u3042\u308c\u3070\u901f\u5ea6\u306e\u30ea\u30b9\u30c8\u3092\u53d6\u5f97\u3059\u308b\u3002 <pre><code>IPolyMeshSchema::Sample mesh_samp;\nmesh.get(mesh_samp);\n</code></pre></p> <p>\u4ee5\u4e0b\u306e\u30b3\u30fc\u30c9\u3067\u3001\u6cd5\u7dda\u306e\u30ea\u30b9\u30c8\u306e\u30dd\u30a4\u30f3\u30bf\u30fc(\u6b63\u78ba\u306b\u306f<code>N3fArraySamplePtr</code>)\u3092\u53d6\u5f97\u3067\u304d\u308b\u3002 <pre><code>auto nsp = N.getExpandedValue().getVals();\n</code></pre></p> <p>\u5404\u6cd5\u7dda\u306f\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u3057\u3066\u53d6\u5f97\u3067\u304d\u308b\u3002 <pre><code>for ( size_t i = 0 ; i &lt; nsp-&gt;size() ; ++i )\n{\n    std::cout &lt;&lt; i &lt;&lt; \"th normal: \" &lt;&lt; (*nsp)[i] &lt;&lt; std::endl;\n}\n</code></pre></p> <p>\u30a4\u30f3\u30c7\u30c3\u30af\u30b9\u3092\u4ed8\u3051\u305f\u3044\u3068\u304d\u306f\u3001<code>getExpandedValue</code>\u306e\u4ee3\u308f\u308a\u306b<code>getIndexedValue</code>\u3092\u4f7f\u3046\u3002 <pre><code>auto uvsamp = uv.getIndexedValue();\n</code></pre></p> <p>\u5024\u306f\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u53d6\u5f97\u3059\u308b\u3002 <pre><code>V2f uv2 = (*(uvsamp.getVals()))[2];\nTESTING_ASSERT( uv2 == V2f( 1.0f, 1.0f ) );\n</code></pre></p> <p>\u9802\u70b9\u306e\u30ea\u30b9\u30c8\u306e\u30b5\u30a4\u30ba\u306f\u4ee5\u4e0b\u3067\u53d6\u5f97\u3067\u304d\u308b\u3002 <pre><code>mesh_samp.getPositions()-&gt;size();\n</code></pre></p> <p>\u6700\u521d\u306e\u9802\u70b9\u306e\u5ea7\u6a19\u306f\u4ee5\u4e0b\u3067\u53d6\u5f97\u3067\u304d\u308b\u3002 <pre><code>(*(mesh_samp.getPositions()))[0];\n</code></pre></p> <p>\u53d6\u5f97\u3059\u308b\u3060\u3051\u306a\u3089\u3001\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u7c21\u6f54\u306b\u66f8\u3051\u308b\u3002 <pre><code>mesh_samp.getPositions()-&gt;get()[0];\n</code></pre></p>"},{"location":"articles/how-to-use-alembic/#\u53c2\u8003\u6587\u732e","title":"\u53c2\u8003\u6587\u732e","text":"<ol> <li>Introduction \u2014 Alembic 1.7.0 documentation</li> <li>alembic/lib/Alembic/AbcGeom/Tests/PolyMeshTest.cpp</li> <li>alembic/lib/Alembic/AbcGeom/Foundation.h</li> <li>alembic/lib/Alembic/AbcGeom/GeometryScope.h</li> <li>Geometric Primitives</li> <li>Alembic/AbcGeom/GeometryScope.h</li> </ol>"},{"location":"articles/how_to_use_onetbb/","title":"oneTBB\u306e\u4f7f\u3044\u65b9","text":"<p>C++ Advent Calendar 2024 22\u65e5\u76ee\u306e\u8a18\u4e8b\u3067\u3059\u3002 \u4eca\u56de\u306f\u610f\u5916\u3068\u5c11\u306a\u304b\u3063\u305foneTBB(\u65e7intel TBB)\u306e\u4f7f\u3044\u65b9\u306b\u3064\u3044\u3066\u66f8\u304d\u307e\u3059\u3002</p>"},{"location":"articles/how_to_use_onetbb/#onetbb\u3068\u306f","title":"oneTBB\u3068\u306f","text":"<p>oneTBB\u3068\u306fintel\u304c\u4e2d\u5fc3\u3068\u306a\u3063\u3066\u958b\u767a\u3057\u3066\u3044\u308b\u3001\u304a\u624b\u8efd\u30de\u30eb\u30c1\u30b9\u30ec\u30c3\u30c7\u30a3\u30f3\u30b0\u30e9\u30a4\u30d6\u30e9\u30ea\u3067\u3059\u3002 C++20\u3067\u306f\u30bb\u30de\u30d5\u30a9\u3084\u30d0\u30ea\u30a2\u3068\u3044\u3063\u305f\u591a\u6570\u306e\u540c\u671f\u51e6\u7406\u306b\u95a2\u3059\u308b\u6a5f\u80fd\u304c\u8ffd\u52a0\u3055\u308c\u307e\u3057\u305f\u304c\u3001\u3053\u308c\u3089\u3092\u4f7f\u3063\u3066\u30de\u30eb\u30c1\u30b9\u30ec\u30c3\u30c9\u306a\u30d7\u30ed\u30b0\u30e9\u30e0\u3092\u66f8\u304f\u306e\u306f\u6163\u308c\u3066\u306a\u3044\u3068\u306a\u304b\u306a\u304b\u5927\u5909\u3060\u3068\u601d\u3044\u307e\u3059\u3002 oneTBB\u3067\u306f<code>for</code>\u6587\u3084<code>reduce</code>\u3001<code>sort</code>\u3068\u3044\u3063\u305f\u51e6\u7406\u3092\u4e26\u5217\u51e6\u7406\u3059\u308b\u95a2\u6570\u3084\u30b9\u30ec\u30c3\u30c9\u30bb\u30fc\u30d5\u306a\u30b3\u30f3\u30c6\u30ca\u3092\u7528\u610f\u3057\u3066\u304a\u308a\u3001\u4e26\u5217\u51e6\u7406\u306b\u8a73\u3057\u304f\u306a\u304f\u3066\u3082\u66f8\u3051\u308b\u3088\u3046\u306b\u8a2d\u8a08\u3055\u308c\u3066\u3044\u307e\u3059\u3002</p> <p>\u540d\u524d\u7a7a\u9593\u306f<code>oneapi::tbb</code>\u3067\u3001<code>oneapi/tbb.h</code>\u3092\u30a4\u30f3\u30af\u30eb\u30fc\u30c9\u3059\u308c\u3070\u5168\u6a5f\u80fd\u304c\u4f7f\u3048\u307e\u3059\u3002</p> <p>\u3067\u306f\u3001\u5b9f\u969b\u306b\u3069\u3093\u306a\u95a2\u6570\u304c\u3042\u308b\u306e\u304b\u898b\u3066\u3044\u304d\u307e\u3057\u3087\u3046\u3002</p>"},{"location":"articles/how_to_use_onetbb/#\u5358\u7d14\u306a\u4e26\u5217\u51e6\u7406","title":"\u5358\u7d14\u306a\u4e26\u5217\u51e6\u7406","text":"<p>\u3053\u3053\u3067\u306f\u3001\u6bd4\u8f03\u7684\u5358\u7d14\u306a\u4e26\u5217\u51e6\u7406\u3092\u884c\u3046\u95a2\u6570\u306b\u3064\u3044\u3066\u898b\u3066\u3044\u304d\u307e\u3059\u3002</p>"},{"location":"articles/how_to_use_onetbb/#\u524d\u63d0\u77e5\u8b58","title":"\u524d\u63d0\u77e5\u8b58","text":"<p>\u4ee5\u4e0b\u3067\u7d39\u4ecb\u3059\u308b\u95a2\u6570\u306f\u5f15\u6570\u306b<code>Range</code>\u578b\u3068\u3044\u3046\u3001\u4f55\u3089\u304b\u306e\u7bc4\u56f2\u3092\u8868\u3059\u30af\u30e9\u30b9\u306e\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u3092\u6307\u5b9a\u3057\u307e\u3059\u3002</p> Note <p><code>parallel_for</code>\u306b\u306f\u6307\u5b9a\u3057\u306a\u3044\u95a2\u6570\u30aa\u30fc\u30d0\u30fc\u30ed\u30fc\u30c9\u3082\u3042\u308a\u307e\u3059\u304c\u3001\u4e26\u5217\u5b9f\u884c\u3055\u308c\u308b\u3068\u306f\u9650\u3089\u306a\u3044\u305f\u3081\u7701\u7565\u3057\u307e\u3059<sup>1</sup>\u3002</p> <p>\u3053\u308c\u306f\u4f8b\u3048\u3070</p> <p>$$ \\sum_{n = 1}^{\\infty} \\frac{1}{n^2} $$</p> <p>\u306e\u8a08\u7b97\u306e\u3088\u3046\u306b\u3001\u5404\u8981\u7d20\u306e\u8a08\u7b97\u306f\u6642\u9593\u304c\u304b\u304b\u3089\u306a\u3044\u304c\u8981\u7d20\u6570\u304c\u591a\u3044\u5834\u5408\u3001\u30b9\u30ec\u30c3\u30c9\u9593\u306e\u540c\u671f\u51e6\u7406\u306b\u3088\u308b\u30aa\u30fc\u30d0\u30fc\u30d8\u30c3\u30c9\u3092\u6e1b\u3089\u3059\u305f\u3081\u306b\u5c0e\u5165\u3055\u308c\u3066\u3044\u307e\u3059\u3002</p> <p>\u3044\u304f\u3064\u304b\u7a2e\u985e\u304c\u3042\u308a\u307e\u3059\u304c<sup>3</sup>\u3001<code>blocked_range</code>\u3092\u77e5\u3063\u3066\u3044\u308c\u3070\u5927\u4f53\u306e\u30b1\u30fc\u30b9\u306f\u554f\u984c\u306a\u3044\u3067\u3057\u3087\u3046\u3002</p> <pre><code>namespace oneapi::tbb {\ntemplate&lt;typename Value&gt;\nclass blocked_range {\n    //! Type of a value\n    /** Called a const_iterator for sake of algorithms that need to treat a blocked_range as an STL container. */\n    using const_iterator = Value;\n\n    //! Type for size of a range\n    using size_type = std::size_t;\n\n    //! Construct range over half-open interval [begin,end), with the given grainsize.\n    blocked_range( Value begin_, Value end_, size_type grainsize_=1 );\n\n    //! Beginning of range.\n    const_iterator begin() const;\n\n    //! One past last value in range.\n    const_iterator end() const;\n\n    //! Size of the range\n    size_type size() const;\n\n    //! True if range is empty.\n    bool empty() const;\n};\n}\n</code></pre> <p>\u3053\u3053\u3067\u306f\u3001\u30e6\u30fc\u30b6\u30fc\u304c\u77e5\u3063\u3066\u3044\u308c\u3070\u3044\u3044\u3082\u306e\u3060\u3051\u3092\u629c\u304d\u51fa\u3057\u307e\u3057\u305f\u3002 \u3053\u306e\u30af\u30e9\u30b9<sup>2</sup>\u306f0\u4ee5\u4e0a\u306e\u6574\u6570\u306e\u7bc4\u56f2 (\u6b63\u78ba\u306b\u306f\u53f3\u534a\u958b\u533a\u9593) \u3092\u8868\u3059\u305f\u3081\u306b\u4f7f\u308f\u308c\u307e\u3059\u3002 \u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u30d1\u30e9\u30e1\u30fc\u30bf\u30fc\u306e<code>Value</code>\u306f\u666e\u901a\u306f<code>std::size_t</code>\u3092\u6307\u5b9a\u3059\u308c\u3070\u826f\u3044\u3067\u3059<sup>4</sup>\u3002 \u30b3\u30f3\u30b9\u30c8\u30e9\u30af\u30bf\u3067\u7bc4\u56f2\u3092\u6307\u5b9a\u3057\u307e\u3057\u3087\u3046\u3002</p> <p>Note</p> <p>\u6c17\u3092\u3064\u3051\u308b\u70b9\u306f<code>begin</code>\u304c\u30a4\u30c6\u30ec\u30fc\u30bf\u3067\u306f\u306a\u304f<code>Value</code>\u578b\u306e\u5024\u3092\u8fd4\u3059\u3053\u3068\u3067\u3059\u3002 \u9593\u9055\u3048\u3084\u3059\u3044\u4e0a\u306b\u3088\u304f\u4f7f\u3046\u306e\u3067\u3001\u6ce8\u610f\u3057\u307e\u3057\u3087\u3046\u3002</p> <p>\u4ee5\u4e0b\u306e\u95a2\u6570\u3067\u306f\u3001\u6e21\u3055\u308c\u305f<code>Range</code>\u578b\u306e\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u3092\u5206\u5272\u3057\u3066\u3001\u5404\u30b9\u30ec\u30c3\u30c9\u3067\u5206\u5272\u5f8c\u306e\u7bc4\u56f2\u3092\u5b9f\u884c\u3057\u3066\u3044\u307e\u3059\u3002</p>"},{"location":"articles/how_to_use_onetbb/#parallel_for","title":"<code>parallel_for</code>","text":"<pre><code>namespace oneapi::tbb {\n  template&lt;typename Range, typename Body&gt;\n  void parallel_for(const Range&amp; range, const Body&amp; body);\n}\n</code></pre> <p>for\u6587\u306e\u3088\u3046\u306b\u3001\u5404\u8981\u7d20\u306b\u5bfe\u3057\u3066<code>body</code>\u3092\u4e26\u5217\u306b\u5b9f\u884c\u3059\u308b\u95a2\u6570\u3067\u3059\u3002 <code>Body</code>\u578b\u306b\u3082\u8981\u4ef6\u304c\u3042\u308a\u307e\u3059\u304c<sup>5</sup>\u3001<code>[...](const Range&amp; r) -&gt; void {...}</code>\u3067\u5341\u5206\u3067\u3059\u3002</p> <p>\u4ee5\u4e0b\u306f<code>parallel_for</code>\u3092\u4f7f\u3063\u305f\u7c21\u5358\u306a\u4f8b\u3067\u3059\u3002</p> src/how_to_use_onetbb/parallel_for.cpp<pre><code>#include &lt;vector&gt;\n\n#include &lt;oneapi/tbb/parallel_for.h&gt;\n\nint main() {\n    using Range = oneapi::tbb::blocked_range&lt;std::size_t&gt;;\n\n    std::vector&lt;double&gt; v;\n    v.resize(1e6);\n\n    oneapi::tbb::parallel_for(Range(1, v.size() + 1), [&amp;v](const Range&amp; r){\n        for (auto i = r.begin(); i != r.end(); ++i) {\n            v[i] = 1.0 / (i * i);\n        }\n    });\n\n    for (std::size_t i = 1; i &lt; v.size() + 1; ++i) {\n        if (v[i - 1] != 1.0 / (i * i)) {\n            return 1;\n        }\n    }\n    return 0;\n}\n</code></pre> <p>Note</p> <p><code>parallel_for</code>\u306f\u30eb\u30fc\u30d7\u5168\u4f53\u3067\u5c11\u306a\u304f\u3068\u3082100\u4e07\u547d\u4ee4\u4ee5\u4e0a\u3042\u308b\u51e6\u7406\u306b\u5bfe\u3057\u3066\u4f7f\u3044\u307e\u3057\u3087\u3046\u3002</p>"},{"location":"articles/how_to_use_onetbb/#parallel_reduce","title":"<code>parallel_reduce</code>","text":"<pre><code>namespace oneapi::tbb {\n  template&lt;typename Range, typename Value, typename Func, typename Reduction&gt;\n  Value parallel_reduce(const Range&amp; range, const Value&amp; identity, const Func&amp; func, const Reduction&amp; reduction);\n}\n</code></pre> <p><code>parallel_reduce</code><sup>6</sup>\u306f<code>std::reduce</code>\u306e\u3088\u3046\u306b\u3001\u4e0e\u3048\u3089\u308c\u305f\u7bc4\u56f2<code>range</code>\u3092\u96c6\u8a08\u3059\u308b\u95a2\u6570\u3067\u3059\u3002\u96c6\u8a08\u9806\u306f</p> <p><code>range</code>\u4ee5\u5916\u306e\u4eee\u5f15\u6570\u306e\u8981\u4ef6\u306f\u3001\u5358\u7d14\u5316\u3059\u308b\u3068\u4ee5\u4e0b\u306e\u901a\u308a\u3067\u3059\u3002</p> <ul> <li><code>identity</code>: \u30b3\u30d4\u30fc\u69cb\u7bc9\u53ef\u304b\u3064\u30b3\u30d4\u30fc\u4ee3\u5165\u53ef\u306a\u578b\u306e\u5de6\u5358\u4f4d\u5143(<code>x == reduction(identity, x)</code>\u3092\u6e80\u305f\u3059\u5024)\u3002<code>func</code>\u306e\u4eee\u5f15\u6570<code>x</code>\u306b\u6e21\u3055\u308c\u307e\u3059\u3002</li> <li><code>func</code>: <code>[...](const Range&amp; r, const Value&amp; x) -&gt; Value {...}</code>\u3092\u6e21\u305b\u3070\u5341\u5206\u3002\u3053\u306e\u95a2\u6570\u306f\u521d\u671f\u5024<code>x</code>\u306b<code>r</code>\u306e\u7bc4\u56f2\u306e\u5024\u3092\u96c6\u8a08\u3059\u308b\u305f\u3081\u306b\u4f7f\u308f\u308c\u307e\u3059\u3002</li> <li><code>reduction</code>: <code>[...](const Value&amp; x, const Value&amp; y) -&gt; Value {...}</code>\u3092\u6e21\u305b\u3070\u5341\u5206\u3002\u3053\u306e\u95a2\u6570\u306f2\u3064\u306e\u5024\u3092\u307e\u3068\u3081\u308b\u305f\u3081\u306b\u4f7f\u308f\u308c\u307e\u3059\u3002</li> </ul> <p>\u4ee5\u4e0b\u306f<code>parallel_reduce</code>\u3092\u4f7f\u3063\u305f\u7c21\u5358\u306a\u4f8b\u3067\u3059\u3002</p> src/how_to_use_onetbb/parallel_reduce.cpp<pre><code>#include &lt;cmath&gt;\n#include &lt;iostream&gt;\n#include &lt;vector&gt;\n\n#include &lt;oneapi/tbb/blocked_range.h&gt;\n#include &lt;oneapi/tbb/parallel_reduce.h&gt;\n\nint main() {\n    using Range = oneapi::tbb::blocked_range&lt;std::size_t&gt;;\n\n    std::vector&lt;double&gt; v;\n    v.resize(1e6);\n\n    for (std::size_t i = 1; i &lt; v.size() + 1; ++i) {\n      v[i] = 1.0 / (i * i);\n    }\n\n    double sum = oneapi::tbb::parallel_reduce(\n      Range(0, v.size()),\n      0.0,\n      [&amp;v](const Range&amp; r, double local_sum) {\n        for (auto i = r.begin(); i != r.end(); ++i) {\n            local_sum += v[i];\n        }\n        return local_sum;\n      },\n      [](double x, double y) {\n        return x + y;\n      }\n    );\n\n    std::cout &lt;&lt; std::sqrt(6 * sum) &lt;&lt; '\\n';\n\n    return 0;\n}\n</code></pre> <p>\u591a\u6570\u306e<code>std::set</code>\u3092\u30de\u30fc\u30b8\u3059\u308b\u3053\u3068\u3082\u51fa\u6765\u307e\u3059\u3002<sup>7</sup> \u5b9f\u884c\u3057\u3066\u3044\u306a\u3044\u306e\u3067\u3001\u9593\u9055\u3063\u3066\u3044\u308b\u304b\u3082\u3057\u308c\u307e\u305b\u3093\u3002</p> src/how_to_use_onetbb/parallel_reduce_rvalue.cpp<pre><code>#include &lt;cmath&gt;\n#include &lt;iostream&gt;\n#include &lt;set&gt;\n#include &lt;vector&gt;\n\n#include &lt;oneapi/tbb/blocked_range.h&gt;\n#include &lt;oneapi/tbb/parallel_reduce.h&gt;\n\nint main() {\n    using Range = oneapi::tbb::blocked_range&lt;std::size_t&gt;;\n    using Set = std::set&lt;double&gt;;\n\n    std::vector&lt;Set&gt; v;\n    v.resize(1e4);\n\n    for (std::size_t i = 1; i &lt; v.size() + 1; ++i) {\n      Set s;\n      for (std::size_t j = 1; j &lt; 1e2 + 1; ++j) {\n        auto k = (i - 1) * 1e2 + j;\n        s.insert(1.0 / (k + k));\n      }\n      v[i] = std::move(s);\n    }\n\n    Set merged = oneapi::tbb::parallel_reduce(\n      Range(0, v.size()),\n      Set{},\n      [&amp;v](const Range&amp; r, Set&amp;&amp; local_sum) {\n        for (auto i = r.begin(); i != r.end(); ++i) {\n            if (local_sum.size() &lt; v[i].size()) {\n              local_sum.swap(v[i]);\n            }\n            local_sum.merge(v[i]);\n        }\n        return local_sum;\n      },\n      [](Set&amp;&amp; x, Set&amp;&amp; y) {\n        if (x.size() &lt; y.size()) {\n          x.swap(y);\n        }\n        x.merge(y);\n        return x;\n      }\n    );\n\n    if (merged.size() != 1e6) {\n      return 1;\n    }\n    return 0;\n}\n</code></pre> Note <p><code>parallel_reduce</code>\u306b\u306f\u5b9f\u306f\u3082\u3046\u4e00\u3064 <pre><code>template&lt;typename Range, typename Body&gt;\nvoid parallel_reduce(const Range&amp; range, Body&amp; body);\n</code></pre> \u3068\u3044\u3046\u30aa\u30fc\u30d0\u30fc\u30ed\u30fc\u30c9\u304c\u3042\u308a\u307e\u3059\u3002\u3053\u306e\u30aa\u30fc\u30d0\u30fc\u30ed\u30fc\u30c9\u306f2\u3064\u76ee\u306e\u4f8b\u306e\u3088\u3046\u306a\u53f3\u8fba\u5024\u3092\u96c6\u8a08\u3057\u305f\u3044\u6642\u306b\u4f7f\u3046\u6a5f\u4f1a\u304c\u3042\u308a\u307e\u3057\u305f\u304c\u30011\u3064\u76ee\u306e\u65b9\u304c\u5bfe\u5fdc\u3057\u305f\u305f\u3081\u4f7f\u3046\u6a5f\u4f1a\u304c\u306a\u3044\u3068\u601d\u3044\u7701\u7565\u3057\u307e\u3057\u305f\u3002</p>"},{"location":"articles/how_to_use_onetbb/#\u8907\u96d1\u306a\u4e26\u5217\u51e6\u7406","title":"\u8907\u96d1\u306a\u4e26\u5217\u51e6\u7406","text":"<p>\u5e74\u5185\u306b\u66f8\u304d\u307e\u3059\u3002</p>"},{"location":"articles/how_to_use_onetbb/#parallel_for_each","title":"<code>parallel_for_each</code>","text":""},{"location":"articles/how_to_use_onetbb/#parallel_pipeline","title":"<code>parallel_pipeline</code>","text":""},{"location":"articles/how_to_use_onetbb/#\u305d\u306e\u4ed6","title":"\u305d\u306e\u4ed6","text":"<p>\u5e74\u5185\u306b\u66f8\u304d\u307e\u3059\u3002</p>"},{"location":"articles/how_to_use_onetbb/#parallel_sort","title":"<code>parallel_sort</code>","text":""},{"location":"articles/how_to_use_onetbb/#\u4f59\u8ac7","title":"\u4f59\u8ac7","text":"<p><code>parallel_reduce</code>\u306e\u5927\u91cf\u306e<code>std::set</code>\u3092\u30de\u30fc\u30b8\u3059\u308b\u3068\u3044\u3046\u4f8b\u306f\u5b9f\u306f\u79c1\u304c\u30b3\u30fc\u30c9\u3092\u66f8\u3044\u3066\u3044\u305f\u4e2d\u3067\u51fa\u3066\u304d\u305f\u554f\u984c\u3067\u3057\u305f\u3002 <code>oneTBB</code>\u306b\u30a4\u30b7\u30e5\u30fc\u3092\u7acb\u3066\u305f\u3068\u3053\u308d\u3001<code>Body</code>\u3092\u4f7f\u3063\u305f\u65b9\u6cd5\u3092\u89aa\u5207\u306b\u6559\u3048\u3066\u3082\u3089\u3044\u307e\u3057\u305f\u3002 intel\u306f\u6700\u8fd1\u3042\u307e\u308a\u826f\u3044\u8a71\u984c\u304c\u3042\u308a\u307e\u305b\u3093\u304c\u3001\u4f55\u3089\u304b\u306e\u5f62\u3067\u6069\u8fd4\u3057\u51fa\u6765\u305f\u3089\u306a\u3068\u601d\u3044\u307e\u3059\u3002</p>"},{"location":"articles/how_to_use_onetbb/#\u53c2\u8003","title":"\u53c2\u8003","text":"<ul> <li>oneAPI Threading Building Blocks (oneTBB)</li> <li>oneTBB</li> </ul> <ol> <li> <p>parallel_for \u21a9</p> </li> <li> <p>blocked_range \u21a9</p> </li> <li> <p>Advanced Topic: Other Kinds of Iteration Spaces \u21a9</p> </li> <li> <p>blocked_range_value \u21a9</p> </li> <li> <p>Body requirements \u21a9</p> </li> <li> <p>parallel_reduce \u21a9</p> </li> <li> <p>Parallel Reduction for rvalues \u21a9</p> </li> </ol>"},{"location":"articles/make-reshaped-matrix-iterator-contiguous/","title":"<code>Eigen</code>\u3067\u884c\u512a\u5148\u306e\u884c\u5217\u3092\u884c\u512a\u5148\u306e\u30d9\u30af\u30c8\u30eb\u306b\u5909\u63db\u3059\u308b\u6642\u3001\u30d9\u30af\u30c8\u30eb\u306e\u30a4\u30c6\u30ec\u30fc\u30bf\u3092<code>std::contiguous_iterator</code>\u306b\u3059\u308b\u65b9\u6cd5","text":"<p>\u3053\u306e\u8a18\u4e8b\u306f\u79c1\u304c<code>Eigen</code>\u306b\u7acb\u3066\u305f\u30a4\u30b7\u30e5\u30fc\u304c\u89e3\u6c7a\u3055\u308c\u308b\u898b\u8fbc\u307f\u304c\u306a\u3044\u306e\u3067\u3001\u57cb\u3082\u308c\u308b\u524d\u306b\u6b8b\u3057\u3066\u304a\u304f\u3064\u3082\u308a\u3067\u66f8\u304d\u307e\u3057\u305f\u3002</p>"},{"location":"articles/make-reshaped-matrix-iterator-contiguous/#\u554f\u984c\u70b9","title":"\u554f\u984c\u70b9","text":"<p><code>Eigen</code>\u3067\u306f\u884c\u5217\u3068\u914d\u5217\u306e\u30a4\u30c6\u30ec\u30fc\u30bf\u304c<code>std::contiguous_iterator</code>\u30b3\u30f3\u30bb\u30d7\u30c8\u3092\u6e80\u305f\u3059\u3088\u3046\u306b\u306a\u308a\u307e\u3057\u305f<sup>1</sup><sup>2</sup><sup>3</sup>\u3002 \u305f\u3060\u3057\u3001\u3068\u3042\u308b\u6761\u4ef6\u3092\u6e80\u305f\u3059\u5fc5\u8981\u304c\u3042\u308a\u3001<code>reshaped</code>\u30e1\u30f3\u30d0\u95a2\u6570\u3067\u884c\u5217\u3092\u30d9\u30af\u30c8\u30eb\u306b\u5909\u63db\u3059\u308b\u5834\u5408\u306f\u5909\u5f62\u5f8c\u306e\u30d9\u30af\u30c8\u30eb\u3068\u5909\u5f62\u524d\u306e\u884c\u5217\u306e\u683c\u7d0d\u9806\u304c\u4e00\u81f4\u3057\u306a\u304f\u3066\u306f\u3044\u3051\u307e\u305b\u3093\u3002 <code>reshaped</code>\u3067\u8fd4\u3055\u308c\u308b\u30d9\u30af\u30c8\u30eb\u306e\u683c\u7d0d\u9806\u306f\u305d\u306e\u30d9\u30af\u30c8\u30eb\u304c\u884c\u30d9\u30af\u30c8\u30eb\u306a\u3089\u884c\u512a\u5148\u3001\u5217\u30d9\u30af\u30c8\u30eb\u306a\u3089\u5217\u512a\u5148\u3067\u3059<sup>5</sup>\u3002 \u3057\u304b\u3057\u3001\u5909\u5f62\u5f8c\u306e\u30d9\u30af\u30c8\u30eb\u306e\u683c\u7d0d\u9806\u306f\u305f\u3068\u3048\u660e\u793a\u7684\u306b<code>Eigen::StorageOptions::RowMajor</code>\u3092\u6e21\u3057\u3066\u3082\u5fc5\u305a\u5217\u30d9\u30af\u30c8\u30eb\u3092\u8fd4\u3059\u305f\u3081<sup>6</sup>\u3001\u5909\u5f62\u524d\u306e\u884c\u5217\u304c\u884c\u512a\u5148\u306e\u5834\u5408\u3060\u3068\u4e0d\u4e00\u81f4\u306b\u306a\u3063\u3066\u3057\u307e\u3044\u307e\u3059\u3002</p> <pre><code>#include &lt;span&gt;\n\n#include \"Eigen/Dense\"\n\nint main() {\n    Eigen::Matrix3f m;\n    std::span&lt;const float, 9&gt;(m.reshaped&lt;Eigen::StorageOptions::RowMajor&gt;().begin(), 9); // \u30a8\u30e9\u30fc\n    return 0;\n}\n</code></pre>"},{"location":"articles/make-reshaped-matrix-iterator-contiguous/#\u89e3\u6c7a\u7b56","title":"\u89e3\u6c7a\u7b56","text":"<p><code>Eigen</code>\u306b\u306f<code>Eigen::fix</code>\u3068\u3044\u3046\u3001\u95a2\u6570\u306b\u3088\u3063\u3066\u69cb\u7bc9\u3055\u308c\u308b\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u306e\u6574\u6570\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u5f15\u6570\u306b\u30b3\u30f3\u30d1\u30a4\u30eb\u6642\u6574\u6570\u3092\u6307\u5b9a\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u308b\u95a2\u6570\u304c\u7528\u610f\u3055\u308c\u3066\u3044\u307e\u3059<sup>4</sup>\u3002 \u3053\u306e\u95a2\u6570\u3092\u4f7f\u3063\u3066\u3001\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u884c\u6570\u3068\u5217\u6570\u3092\u6307\u5b9a\u3059\u308b\u3068\u5909\u5f62\u5f8c\u306e\u30d9\u30af\u30c8\u30eb\u306f\u884c\u30d9\u30af\u30c8\u30eb\u3068\u306a\u308a\u3001\u884c\u512a\u5148\u306e\u884c\u5217\u3092\u5909\u5f62\u3057\u3066\u3082\u683c\u7d0d\u9806\u304c\u4e00\u81f4\u3057\u307e\u3059\u3002</p> <pre><code>#include &lt;span&gt;\n\n#include \"Eigen/Dense\"\n\nint main() {\n    Eigen::Matrix3f m;\n    std::span&lt;const float, 9&gt;(\n        m.reshaped&lt;Eigen::StorageOptions::RowMajor&gt;(Eigen::fix&lt;1&gt;, Eigen::fix&lt;9&gt;).begin(), 9);\n    return 0;\n}\n</code></pre>"},{"location":"articles/make-reshaped-matrix-iterator-contiguous/#\u53c2\u8003","title":"\u53c2\u8003","text":"<ol> <li> <p>allow pointer_based_stl_iterator to conform to the contiguous_iterator concept if we are in c++20 \u21a9</p> </li> <li> <p>Eigen/src/Core/Matrix.h \u21a9</p> </li> <li> <p>Eigen/src/Core/Array.h \u21a9</p> </li> <li> <p>Eigen::fix \u21a9</p> </li> <li> <p>Eigen/src/Core/Reshaped \u21a9</p> </li> <li> <p>Eigen/src/plugins/ReshapedMethods.inc \u21a9</p> </li> </ol>"},{"location":"articles/memo/","title":"\u30e1\u30e2","text":"<p>\u5c0f\u30cd\u30bf\u96c6\u3067\u3059\u3002</p>"},{"location":"articles/memo/#blender\u3067alembic\u3092\u51fa\u529b\u3057\u305f\u5834\u5408","title":"Blender\u3067Alembic\u3092\u51fa\u529b\u3057\u305f\u5834\u5408","text":"<ul> <li>\u901f\u5ea6\u306f\u51fa\u529b\u3055\u308c\u306a\u3044</li> <li>\u525b\u4f53\u904b\u52d5\u306fXformSample\u306b\u8a18\u9332\u3055\u308c\u308b</li> <li>\u30bd\u30d5\u30c8\u30dc\u30c7\u30a3\u306e\u904b\u52d5\u306fXformSample\u306b\u8a18\u9332\u3055\u308c\u306a\u3044</li> <li>\u30bd\u30d5\u30c8\u30dc\u30c7\u30a3\u3068\u525b\u4f53\u304c\u3042\u308b\u6642\u3001\u4f8b\u3048\u525b\u4f53\u3067\u3042\u3063\u3066\u3082\u5404\u30d5\u30ec\u30fc\u30e0\u3054\u3068\u306e\u30dd\u30ea\u30b4\u30f3\u30e1\u30c3\u30b7\u30e5\u306e\u60c5\u5831(\u70b9\u3001\u6cd5\u7dda\u3001\u9762)\u304c\u51fa\u529b\u3055\u308c\u308b\u3002</li> </ul>"},{"location":"articles/memo/#thrust","title":"Thrust","text":"<ul> <li>oneTBB\u3092\u30c7\u30d0\u30a4\u30b9\u3068\u3057\u3066\u4f7f\u3046\u5834\u5408\u3001\u30b3\u30f3\u30d1\u30a4\u30eb\u30aa\u30d7\u30b7\u30e7\u30f3<code>-expt-extended-lambda</code>\u3092nvcc\u306b\u6e21\u3057\u3066\u3082\u30e9\u30e0\u30c0\u5f0f\u3092\u30c7\u30d0\u30a4\u30b9\u30b3\u30fc\u30c9\u3067\u4f7f\u3046\u3053\u3068\u306f\u3067\u304d\u306a\u3044\u3002</li> <li>\u5165\u308c\u5b50\u306b\u306a\u3063\u305f<code>host_vector</code>\u3068<code>device_vector</code>\u306f\u304a\u4e92\u3044\u306b\u30b3\u30d4\u30fc\u3067\u304d\u306a\u3044(\u30b3\u30f3\u30d1\u30a4\u30eb\u30a8\u30e9\u30fc\u306b\u306a\u308b)\u3002</li> </ul>"},{"location":"articles/memo/#c","title":"C++","text":"<ul> <li>C++\u6a19\u6e96async+future\u3068\u30b9\u30ec\u30c3\u30c9\u30d7\u30fc\u30eb\u306e\u6027\u80fd\u6bd4\u8f03</li> <li>\u30e6\u30fc\u30b6\u30fc\u5b9a\u7fa9\u3068default\u5ba3\u8a00\u3067\u5b9a\u7fa9\u3055\u308c\u305f\u30b3\u30d4\u30fc\u30b3\u30f3\u30b9\u30c8\u30e9\u30af\u30bf\u3092\u30de\u30af\u30ed\u3067\u5207\u308a\u66ff\u3048\u308b\u3053\u3068\u306f\u3067\u304d\u306a\u3044\u3002</li> <li><code>struct A final {}</code>\u306f\u5408\u6cd5\u3002</li> <li>\u30e9\u30e0\u30c0\u95a2\u6570\u306f\u9759\u7684\u306a\u5909\u6570\u3092\u81ea\u52d5\u7684\u306b\u30ad\u30e3\u30d7\u30c1\u30e3\u3059\u308b\u3002</li> <li>\u4ee5\u4e0b\u306e\u3088\u3046\u306a\u518d\u5e30\u7684\u306a\u69cb\u9020\u4f53\u306f\u5408\u6cd5\u3002 <pre><code>template &lt;int D&gt;\nstruct A\n{\n    static_assert(D &gt; 1);\n\n    double d;\n    A&lt;D-1&gt; a;\n};\n\ntemplate &lt;&gt;\nstruct A&lt;1&gt;\n{\n    int d;\n};\n</code></pre></li> <li>\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u30af\u30e9\u30b9\u306e\u9759\u7684\u306a\u30e1\u30f3\u30d0\u5b9a\u6570\u306f<code>inline</code>\u306b\u3059\u308b\u3068\u660e\u793a\u7684\u306b\u5b9f\u4f53\u3092\u5b9a\u7fa9\u305b\u305a\u306b\u6e08\u3080\u3002</li> <li>\u30e1\u30f3\u30d0\u5909\u6570\u306b<code>const</code>\u3092\u4ed8\u3051\u308b\u3068<code>default</code>\u5ba3\u8a00\u3055\u308c\u305f\u30e0\u30fc\u30d6\u4ee3\u5165\u6f14\u7b97\u5b50\u304c\u524a\u9664\u3055\u308c\u308b\u3002</li> </ul>"},{"location":"articles/memo/#boost","title":"Boost","text":"<ul> <li>Boost.Test\u3092CMake\u306e<code>find_package</code>\u3067\u898b\u3064\u3051\u305f\u3044\u6642\u306f\u3001<code>components</code>\u306b<code>unit_test_framework</code>\u3092\u6307\u5b9a\u3057\u306a\u3044\u3068\u3044\u3051\u306a\u3044\u3002</li> </ul>"},{"location":"articles/memo/#git","title":"Git","text":"<ul> <li>git push --force-with-lease</li> <li><code>git rm</code>\u3067\u30b5\u30d6\u30e2\u30b8\u30e5\u30fc\u30eb\u3092\u6d88\u305b\u308b\u3002</li> <li>fast-forward\u3067\u306e\u30de\u30fc\u30b8\u3092\u53d6\u308a\u6d88\u3057\u305f\u3044\u6642\u306f\u3001<code>git reflog --keep (\u30d6\u30e9\u30f3\u30c1\u540d)@{\u756a\u53f7}</code>\u3068\u3059\u308c\u3070\u826f\u3044\u3002</li> <li>\u6700\u65b0\u306e\u30b3\u30df\u30c3\u30c8\u3057\u304b\u8981\u3089\u306a\u3044\u30ea\u30dd\u30b8\u30c8\u30ea\u3092\u30af\u30ed\u30fc\u30f3\u3057\u305f\u3044\u6642\u3001<code>--depth 1</code>\u3092\u3064\u3051\u308c\u3070\u826f\u3044\u3002</li> <li>\u8ffd\u8de1\u3057\u3066\u3044\u306a\u3044\u30d5\u30a1\u30a4\u30eb\u3092\u6d88\u3057\u305f\u3044\u6642\u306f<code>git clean</code>\u3002</li> <li>\u8ffd\u8de1\u3057\u3066\u3044\u308b\u30d5\u30a1\u30a4\u30eb\u3092\u5168\u3066\u30b9\u30c6\u30fc\u30b8\u30f3\u30b0\u3057\u305f\u3044\u6642\u306f<code>git add -u</code>\u3002</li> </ul>"},{"location":"articles/memo/#petc","title":"PETc","text":""},{"location":"articles/memo/#petsc\u306ec\u306e\u6a5f\u80fd\u3092\u4f7f\u3046\u306b\u306f","title":"PETSc\u306eC++\u306e\u6a5f\u80fd\u3092\u4f7f\u3046\u306b\u306f","text":"<p>PETSc\u306b\u306f<code>PetscCallThrow</code>\u3068\u3044\u3046\u3001\u30a8\u30e9\u30fc\u304c\u767a\u751f\u3059\u308b\u3068<code>std::runtime_error</code>\u3092\u6295\u3052\u308b\u95a2\u6570\u304c\u3042\u308b\u3002 \u3053\u306e\u95a2\u6570\u306f<code>PETSC_CLANGUAGE_CXX</code>\u3068\u3044\u3046\u30de\u30af\u30ed\u304c\u5b9a\u7fa9\u3055\u308c\u3066\u3044\u306a\u3044\u3068\u4f7f\u3048\u306a\u3044\u3002 \u4ed6\u306b\u3082C++\u7528\u306e\u95a2\u6570\u304c\u3042\u308b\u304b\u3082\u3057\u308c\u306a\u3044\u306e\u3067\u5b9a\u7fa9\u3059\u308b\u3053\u3068\u3092\u304a\u52e7\u3081\u3059\u308b\u3002 \u3061\u306a\u307f\u306b\u3001\u30d8\u30c3\u30c0\u30fc\u3092\u30a4\u30f3\u30af\u30eb\u30fc\u30c9\u3059\u308b\u6642\u306f<code>extern \"C\"</code>\u3092\u3064\u3051\u306a\u3044\u3002</p>"},{"location":"articles/memo/#petsc\u306econfigure\u306e\u5b9f\u884c\u30aa\u30d7\u30b7\u30e7\u30f3","title":"PETSc\u306econfigure\u306e\u5b9f\u884c\u30aa\u30d7\u30b7\u30e7\u30f3","text":"<p>\u516c\u5f0f\u30b5\u30a4\u30c8\u306b\u7528\u9014\u306b\u5fdc\u3058\u3066\u4f7f\u3046\u30aa\u30d7\u30b7\u30e7\u30f3\u304c\u793a\u3055\u308c\u3066\u3044\u308b\u304c\u3001\u3069\u3093\u306a\u30aa\u30d7\u30b7\u30e7\u30f3\u304c\u3042\u308b\u306e\u304b\u793a\u3055\u308c\u3066\u3044\u306a\u3044\u3002 \u3069\u3093\u306a\u30aa\u30d7\u30b7\u30e7\u30f3\u304c\u3042\u308b\u306e\u304b\u8abf\u3079\u308b\u305f\u3081\u306e\u4e00\u756a\u624b\u3063\u53d6\u308a\u65e9\u3044\u65b9\u6cd5\u306f\u3001CI\u306e\u30c6\u30b9\u30c8\u3092\u898b\u308b\u3053\u3068\u3067\u3042\u308b\u3002 \u5730\u9053\u306a\u65b9\u6cd5\u306f\u30bd\u30fc\u30b9\u30b3\u30fc\u30c9\u3092\u898b\u308b\u3053\u3068\u3060\u304c\u3001<code>BuildSystem</code>\u304c\u3042\u307e\u308a\u306b\u8907\u96d1\u306a\u306e\u3067\u6642\u9593\u304c\u304b\u304b\u308b\u3060\u308d\u3046\u3002 \u500b\u4eba\u7684\u306b\u306fpackage\u3092\u898b\u308b\u3068\u3001\u30e9\u30a4\u30d6\u30e9\u30ea\u6bce\u306e\u30aa\u30d7\u30b7\u30e7\u30f3\u304c\u3069\u3046\u3044\u3046\u98a8\u306b\u4f7f\u308f\u308c\u3066\u3044\u308b\u304b\u308f\u304b\u308b\u306e\u3067\u3001\u3053\u3053\u3092\u898b\u308b\u3053\u3068\u3092\u304a\u52e7\u3081\u3059\u308b\u3002</p>"},{"location":"articles/memo/#\u53c2\u8003","title":"\u53c2\u8003","text":"<ol> <li>Thrust 1.9.4 \u30ea\u30ea\u30fc\u30b9\u30ce\u30fc\u30c8</li> <li>Predefined Node Types (oneTBB Documentation)</li> <li>Undo git fast forward merge</li> <li>\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u5909\u6570\u304c\u30e9\u30e0\u30c0\u95a2\u6570\u306b\u30ad\u30e3\u30d7\u30c1\u30e3\u3055\u308c\u308b\u3053\u3068\u306b\u3088\u308b\u30a8\u30e9\u30fc\u306e\u4f8b</li> <li>\u518d\u5e30\u7684\u306a\u69cb\u9020\u4f53\u306e\u4f8b</li> </ol>"},{"location":"articles/thrust-async/","title":"Thrust\u306e\u975e\u540c\u671f\u5b9f\u884c","text":"<p>Thrust\u306e\u975e\u540c\u671f\u5b9f\u884c\u306b\u3064\u3044\u3066\u3067\u3059\u304c\u3001\u65e5\u672c\u8a9e\u306e\u6587\u732e\u304c\u300ethrust\u306basync\u30b5\u30dd\u30fc\u30c8\u304c\u5165\u3063\u3066\u3044\u305f\u300f\u304f\u3089\u3044\u3057\u304b\u898b\u5f53\u305f\u3089\u306a\u304b\u3063\u305f\u306e\u3067\u3001\u5177\u4f53\u4f8b\u3092\u4ea4\u3048\u306a\u304c\u3089\u74b0\u5883\u69cb\u7bc9\u304b\u3089\u89e3\u8aac\u3057\u305f\u3044\u3068\u601d\u3044\u307e\u3059\u3002</p>"},{"location":"articles/thrust-async/#\u74b0\u5883\u69cb\u7bc9","title":"\u74b0\u5883\u69cb\u7bc9","text":"<p>CMake\u3092\u4f7f\u3046\u3084\u308a\u65b9\u3092\u3054\u7d39\u4ecb\u3057\u307e\u3059\u3002 Windows\u3067\u306f\u8a66\u3057\u3066\u3044\u306a\u3044\u305f\u3081\u3001\u3054\u4e86\u627f\u4e0b\u3055\u3044\u3002</p> <p>\u4ee5\u4e0b\u306e\u30bd\u30d5\u30c8\u30a6\u30a7\u30a2\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u3066\u304f\u3060\u3055\u3044\u3002</p> <ul> <li>CUDA &gt;= 12.3</li> <li>CMake &gt;= 3.27.7</li> <li>GCC &gt;= 5.1 \u307e\u305f\u306f Clang &gt;= 3.4</li> </ul> <p>Git\u3082\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3092\u304a\u52e7\u3081\u3057\u307e\u3059\u304c\u3001\u306a\u304f\u3066\u3082\u554f\u984c\u3042\u308a\u307e\u305b\u3093\u3002</p>"},{"location":"articles/thrust-async/#thrust\u306e\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9","title":"Thrust\u306e\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9","text":"<p>Thrust\u3092\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3057\u307e\u3059\u3002 1.9.4\u4ee5\u4e0a\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u3092\u9078\u3093\u3067\u4e0b\u3055\u3044\u3002 Git\u3092\u4f7f\u3046\u65b9\u306f\u518d\u5e30\u7684\u306b\u30b5\u30d6\u30e2\u30b8\u30e5\u30fc\u30eb\u3092\u30af\u30ed\u30fc\u30f3\u3057\u3066\u304f\u3060\u3055\u3044\u3002</p> <p>\u306a\u305c\u30bd\u30fc\u30b9\u30b3\u30fc\u30c9\u3092\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3059\u308b\u304b\u3068\u3044\u3046\u3068\u3001CMake\u304cThrust\u3092\u898b\u3064\u3051\u3066\u304f\u308c\u306a\u304b\u3063\u305f\u305f\u3081\u3067\u3059\u3002 \u898b\u3064\u3051\u65b9\u3092\u3054\u5b58\u3058\u306e\u65b9\u306f\u6559\u3048\u3066\u3044\u305f\u3060\u3051\u308b\u3068\u5e78\u3044\u3067\u3059\u3002</p>"},{"location":"articles/thrust-async/#cmake\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306e\u4f5c\u6210","title":"CMake\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306e\u4f5c\u6210","text":"<p>\u4f8b\u3068\u3057\u3066\u3001<code>float</code>\u3068<code>int</code>\u306e\u914d\u5217\u3092\u4f5c\u6210\u3057\u3001GPU\u3067\u5404\u8981\u7d20\u306e2\u4e57\u3092\u8a08\u7b97\u3057\u3001\u7d50\u679c\u304c\u6b63\u3057\u3044\u304b\u78ba\u8a8d\u3059\u308b\u30d7\u30ed\u30b0\u30e9\u30e0\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002 \u4ee5\u4e0b\u306e\u3088\u3046\u306bCMake\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002</p> <pre><code>hoge/-- CMakeLists.txt\n     |- double.cu\n     |- double.h\n     |- main.cpp\n     |- thrust/\n</code></pre> <p>CMakeLists.txt\u306b\u4ee5\u4e0b\u3092\u66f8\u304d\u307e\u3059\u3002</p> CMakeLists.txt<pre><code>cmake_minimum_required(VERSION 3.27.7)\n\n# CUDA\u30a2\u30fc\u30ad\u30c6\u30af\u30c1\u30e3\u3092\u6307\u5b9a\u3059\u308b\u3002\n# \u6700\u521d\u306b\u8a2d\u5b9a\u3057\u306a\u3044\u3068\u3001\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u304c\u4f5c\u6210\u3067\u304d\u307e\u305b\u3093\u3002\nif(NOT DEFINED CMAKE_CUDA_ARCHITECTURES)\n  set(CMAKE_CUDA_ARCHITECTURES native)\nendif()\n\nproject(my_program VERSION 0.1.0 LANGUAGES CXX CUDA)\n\n# \u3053\u3053\u306e\u8a2d\u5b9a\u306f\u304a\u597d\u307f\u3067\u3002\nset(CMAKE_CXX_EXTENSIONS OFF)\nset(CMAKE_OPTIMIZE_DEPENDENCIES ON)\n\n# CUDA\u3092\u898b\u3064\u3051\u308b\u3002\nfind_package(CUDAToolkit 12 REQUIRED)\n\n# Thrust\u3092\u898b\u3064\u3051\u308b\u3002\nadd_subdirectory(thrust)\nfind_package(Thrust REQUIRED CONFIG)\nthrust_create_target(Thrust)\n\n# CUDA\u30e9\u30a4\u30d6\u30e9\u30ea\u3092\u4f5c\u308b\u3002\nadd_library(double double.cu)\ntarget_compile_options(\n  double\n  PRIVATE\n    # C++14\u4ee5\u4e0a\u304c\u5fc5\u8981\n    cxx_std_14\n    # \u30e9\u30e0\u30c0\u5f0f\u3092\u30c7\u30d0\u30a4\u30b9\u30b3\u30fc\u30c9\u3067\u4f7f\u3048\u308b\u3088\u3046\u306b\u3059\u308b\u3002\n    -expt-extended-lambda\n    # SIMD\u3092\u7121\u52b9\u306b\u3059\u308b\u3002\n    # SIMD\u306e\u7121\u52b9\u5316\u306f\u5fc5\u9808\u3067\u306f\u3042\u308a\u307e\u305b\u3093\u304c\u3001Eigen\u306a\u3069\u7dda\u5f62\u4ee3\u6570\u30e9\u30a4\u30d6\u30e9\u30ea\u3092\u4f7f\u3046\u969b\u306b\u5fc5\u8981\u306b\u306a\u308a\u307e\u3059\u3002\n    \"$&lt;$&lt;COMPILE_LANG_AND_ID:CXX,GNU&gt;:-fno-tree-vectorize&gt;\"\n    \"$&lt;$&lt;COMPILE_LANG_AND_ID:CXX,Clang&gt;:-fno-vectorize&gt;\"\n)\n# \u3053\u3053\u306f\u304a\u597d\u307f\u3067\u3002\ntarget_compile_features(\n  double\n  PRIVATE\n    cuda_std_20\n)\n# \u8ab0\u3082\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u306a\u3044\u306f\u305a\u306a\u306e\u3067\u3001\u7c21\u7565\u306b\u3002\ntarget_include_directories(\n  double\n  PUBLIC \n    ${CMAKE_CURRENT_SOURCE_DIR}\n)\n# CUDA\u30e9\u30f3\u30bf\u30a4\u30e0\u3068Thrust\u3092\u30ea\u30f3\u30af\u3059\u308b\u3002\n# \u5f53\u305f\u308a\u524d\u3067\u3059\u304c\u3001Thrust\u306b\u306fCUDA\u306f\u306a\u3044\u306e\u3067\u3002\ntarget_link_libraries(\n  double\n  PUBLIC\n    CUDA::cudart\n    Thrust\n)\n\n# my_program\u3092\u4f5c\u308b\u3002\nadd_executable(my_program main.cpp)\ntarget_link_libraries(\n  my_program\n  PRIVATE\n    double\n)\n# \u3053\u3053\u306f\u304a\u597d\u307f\u3067\u3002\ntarget_compile_features(\n  my_program\n  PRIVATE\n    cxx_std_20\n)\n# \u3053\u3053\u306f\u304a\u597d\u307f\u3067\u3002\ntarget_compile_options(\n  my_program\n  PRIVATE\n    \"$&lt;$&lt;CONFIG:Debug&gt;:-g;-O0;-Wall;-Wextra&gt;\"\n    \"$&lt;$&lt;CONFIG:Release&gt;:-DNDEBUG;-O3;-march=native;-mtune=native&gt;\"\n)\n# CUDA 5.0\u4ee5\u524d\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u3067\u306f\u3001\u30c7\u30d0\u30a4\u30b9\u30b3\u30fc\u30c9\u3067\u4f7f\u7528\u3059\u308b\u95a2\u6570\u306e\u5b9f\u88c5\u307e\u3067\u30a4\u30f3\u30af\u30eb\u30fc\u30c9\u3059\u308b\u5fc5\u8981\u304c\n# \u3042\u308a\u307e\u3057\u305f\u304c\u3001CUDA 5.0\u4ee5\u964d\u3067\u306f\u3001\u30c7\u30d0\u30a4\u30b9\u30b3\u30fc\u30c9\u3067\u4f7f\u7528\u3059\u308b\u95a2\u6570\u306e\u5ba3\u8a00\u306e\u307f\u3092\u30a4\u30f3\u30af\u30eb\u30fc\u30c9\u3059\u308b\u3060\u3051\u3067\n# \u5341\u5206\u306b\u306a\u308a\u307e\u3057\u305f\u3002\n# \u3053\u306e\u3053\u3068\u3092\u30b3\u30f3\u30d1\u30a4\u30e9\u3068\u30ea\u30f3\u30ab\u30fc\u306b\u4f1d\u3048\u308b\u305f\u3081\u306b\u3001CUDA_SEPARABLE_COMPILATION\u30d7\u30ed\u30d1\u30c6\u30a3\u3092ON\u306b\n# \u3057\u3066\u3044\u307e\u3059\u3002\n# \u305f\u3060\u3057\u3001\u3053\u306e\u30d7\u30ed\u30d1\u30c6\u30a3\u306f\u5b9f\u884c\u30d5\u30a1\u30a4\u30eb\u306b\u306e\u307fON\u306b\u8a2d\u5b9a\u3057\u3066\u4e0b\u3055\u3044\u3002\n# \u8a73\u3057\u304f\u306f\u53c2\u8003\u6587\u732e1\u3092\u53c2\u7167\u3057\u3066\u304f\u3060\u3055\u3044\u3002\nset_property(TARGET my_program PROPERTY CUDA_SEPARABLE_COMPILATION ON)\n</code></pre>"},{"location":"articles/thrust-async/#thrust\u306e\u975e\u540c\u671f\u5b9f\u884c\u306e\u66f8\u304d\u65b9","title":"Thrust\u306e\u975e\u540c\u671f\u5b9f\u884c\u306e\u66f8\u304d\u65b9","text":"<p>\u3044\u3088\u3044\u3088\u672c\u984c\u3067\u3059\u3002</p>"},{"location":"articles/thrust-async/#event\u3068future","title":"event\u3068future","text":"<p>Thrust\u306b\u306f<code>event</code>\u3068<code>future</code>\u304c\u3042\u308a\u307e\u3059\u3002 <code>future</code>\u306f<code>reduce</code>\u304b\u3089\u8fd4\u3055\u308c\u3001\u305d\u306e\u4ed6\u306e\u30a2\u30eb\u30b4\u30ea\u30ba\u30e0\u306f<code>event</code>\u3092\u8fd4\u3057\u307e\u3059\u3002 \u3069\u3061\u3089\u3082<code>wait()</code>\u30e1\u30f3\u30d0\u95a2\u6570\u3092\u6301\u3061\u3001\u975e\u540c\u671f\u5b9f\u884c\u304c\u7d42\u308f\u308b\u307e\u3067\u5f85\u3061\u307e\u3059\u3002 <code>future</code>\u306f\u3055\u3089\u306b<code>get()</code>\u30e1\u30f3\u30d0\u95a2\u6570\u3092\u6301\u3061\u3001\u5b9f\u884c\u7d50\u679c\u3092\u53d6\u5f97\u3067\u304d\u307e\u3059\u3002 \u8a73\u3057\u304f\u77e5\u308a\u305f\u3044\u65b9\u306f\u53c2\u8003\u6587\u732e2\u306e\u30d7\u30ed\u30b0\u30e9\u30e0\u3092\u3054\u89a7\u304f\u3060\u3055\u3044\u3002 <code>event</code>\u306f<code>unique_eager_event</code>\u30af\u30e9\u30b9\u306b, <code>future</code>\u306f<code>unique_eager_future</code>\u30af\u30e9\u30b9\u306b\u5bfe\u5fdc\u3057\u3066\u3044\u307e\u3059\u3002</p> <p>\u30d8\u30c3\u30c0\u30fc\u306f\u305d\u308c\u305e\u308cthrust/event.h, thrust/future.h\u3067\u3059\u3002 \u4eca\u56de\u306f\u8a08\u7b97\u7d50\u679c\u3092<code>host_vector</code>\u306b\u683c\u7d0d\u3059\u308b\u306e\u3067\u3001\u4f7f\u3046\u306e\u306f\u5b9f\u884c\u304c\u5b8c\u4e86\u3057\u305f\u304b\u78ba\u8a8d\u3059\u308b\u3060\u3051\u306e<code>event</code>\u3067\u3059\u3002</p> double.h<pre><code>#include &lt;thrust/event.h&gt;\n#include &lt;thrust/host_vector.h&gt;\n\nthrust::device_event Double(thrust::host_vector&lt;float&gt;&amp; doubles, thrust::host_vector&lt;int&gt;&amp; ints);\n</code></pre> <p>\u3053\u3053\u3067<code>device_event</code>\u3092\u4f7f\u3063\u3066\u3044\u307e\u3059\u304c\u3001\u30db\u30b9\u30c8\u3067\u3082\u4f7f\u3048\u307e\u3059\u3002 <code>host_event</code>\u306f\u3042\u308a\u307e\u305b\u3093\u3002 \u5f8c\u306e\u300c\u6b20\u70b9\u300d\u306e\u7bc0\u3067\u3053\u306e\u3053\u3068\u306b\u89e6\u308c\u307e\u3059\u3002 <code>__global__</code>\u306f\u3042\u3063\u3066\u3082\u306a\u304f\u3066\u3082\u3044\u3044\u3067\u3059\u3002</p>"},{"location":"articles/thrust-async/#\u975e\u540c\u671f\u306a\u30a2\u30eb\u30b4\u30ea\u30ba\u30e0\u3068\u5b9f\u884c\u30dd\u30ea\u30b7\u30fc","title":"\u975e\u540c\u671f\u306a\u30a2\u30eb\u30b4\u30ea\u30ba\u30e0\u3068\u5b9f\u884c\u30dd\u30ea\u30b7\u30fc","text":"<p>Thrust\u306b\u306f<code>copy</code>\u3084<code>transform</code>\u3068\u3044\u3063\u305f\u3001STL\u306e\u3088\u3046\u306a\u95a2\u6570\u304c\u7528\u610f\u3055\u308c\u3066\u3044\u307e\u3059\u3002 \u3053\u308c\u3089\u3092\u975e\u540c\u671f\u306b\u5b9f\u884c\u3057\u305f\u3044\u5834\u5408\u306f\u3001<code>async</code>\u540d\u524d\u7a7a\u9593\u306e\u3082\u306e\u3092\u4f7f\u3048\u3070\u3044\u3044\u3067\u3059\u3002 \u4f8b\u3048\u3070\u3001<code>thrust::copy</code>\u306e\u975e\u540c\u671f\u7248\u306f<code>thrust::async::copy</code>\u3067\u3059\u3002</p> <p>\u5b9f\u884c\u30dd\u30ea\u30b7\u30fc\u3068\u306f\u3001\u30a2\u30eb\u30b4\u30ea\u30ba\u30e0\u306b\u30db\u30b9\u30c8\u3067\u5b9f\u884c\u3059\u308b\u306e\u304b\u3001\u30c7\u30d0\u30a4\u30b9\u3067\u5b9f\u884c\u3059\u308b\u306e\u304b\u3001\u305d\u308c\u3068\u3082\u9010\u6b21\u7684\u306b\u51e6\u7406\u3059\u308b\u306e\u304b\u3092\u6307\u5b9a\u3059\u308b\u30af\u30e9\u30b9\u3067\u3059\u3002 \u30af\u30e9\u30b9\u540d\u306f\u305d\u308c\u305e\u308c<code>host</code>\u3001<code>device</code>\u3001<code>seq</code>\u3067\u3059\u3002 \u30a2\u30eb\u30b4\u30ea\u30ba\u30e0\u306b\u660e\u793a\u7684\u306b\u6307\u5b9a\u3059\u308b\u3053\u3068\u3067\u3001\u7121\u99c4\u306a\u30c7\u30fc\u30bf\u306e\u30b3\u30d4\u30fc\u3092\u6e1b\u3089\u305b\u307e\u3059\u3002 \u5b9f\u88c5\u306f\u30bf\u30b0\u30c7\u30a3\u30b9\u30d1\u30c3\u30c1\u3067\u3001\u81ea\u5206\u3067\u30ab\u30b9\u30bf\u30de\u30a4\u30ba\u3059\u308b\u3053\u3068\u3082\u53ef\u80fd\u3067\u3059\u3002 \u8a73\u3057\u304f\u306f\u53c2\u8003\u6587\u732e3\u3092\u3054\u89a7\u304f\u3060\u3055\u3044\u3002</p> <p>\u5b9f\u884c\u30dd\u30ea\u30b7\u30fc\u81ea\u4f53\u306f\u540c\u671f\u7684\u306a\u30a2\u30eb\u30b4\u30ea\u30ba\u30e0\u306b\u5bfe\u3057\u3066\u3082\u4f7f\u3048\u307e\u3059\u304c\u3001\u975e\u540c\u671f\u306a\u3089<code>host</code>\u3068<code>device</code>\u306e<code>after</code>\u30e1\u30f3\u30d0\u95a2\u6570\u306b<code>event</code>\u3068<code>future</code>\u3092\u6307\u5b9a\u3059\u308b\u3053\u3068\u3067\u5b9f\u884c\u9806\u5e8f\u3092\u6307\u5b9a\u3067\u304d\u307e\u3059\u3002 <code>event</code>\u3068<code>future</code>\u306e\u500b\u6570\u306f\u4f55\u500b\u3067\u3082\u3044\u3044\u3067\u3059\u3002 \u307e\u305f\u3001<code>thrust::when_all</code>\u95a2\u6570\u3067\u8907\u6570\u306e<code>event</code>\u3068<code>future</code>\u3092\u4e00\u3064\u306e<code>event</code>\u306b\u307e\u3068\u3081\u308b\u3053\u3068\u3082\u3067\u304d\u307e\u3059\u3002</p> <p>\u3053\u308c\u3089\u3092\u8e0f\u307e\u3048\u3066\u3001\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u5b9f\u88c5\u3057\u3066\u307f\u307e\u3059\u3002</p> double.cu<pre><code>#include &lt;thrust/async/copy.h&gt;\n#include &lt;thrust/async/transform.h&gt;\n#include &lt;thrust/device_vector.h&gt;\n\n#include \"double.h\"\n\ntemplate &lt;class T&gt;\nthrust::device_event Double(thrust::host_vector&lt;T&gt;&amp; ts) {\n  // \u30c7\u30d0\u30a4\u30b9\u5074\u306e\u914d\u5217\u3092\u7528\u610f\n  auto device_ts = thrust::device_vector&lt;T&gt;();\n\n  // \u30e1\u30e2\u30ea\u306e\u78ba\u4fdd\u3068\u521d\u671f\u5316\n  device_ts.resize(ts.size());\n\n  // \u30db\u30b9\u30c8\u304b\u3089\u30c7\u30d0\u30a4\u30b9\u3078\u306e\u975e\u540c\u671f\u30b3\u30d4\u30fc\n  auto copy_ts_event = thrust::async::copy(\n      thrust::host,\n      thrust::device,\n      ts.begin(),\n      ts.end(),\n      device_ts.begin()\n  );\n\n  // \u30c7\u30d0\u30a4\u30b9\u5074\u3067\u306e\u8a08\u7b97\n  auto double_ts_event = thrust::async::transform(\n      thrust::device.after(copy_ts_event),\n      device_ts.begin(),\n      device_ts.end(),\n      device_ts.begin(),\n      [] __device__(T d) { return d * d; }\n  );\n\n  // \u30c7\u30d0\u30a4\u30b9\u304b\u3089\u30db\u30b9\u30c8\u3078\u306e\u975e\u540c\u671f\u30b3\u30d4\u30fc\n  auto copy_back_ts_event = thrust::async::copy(\n      thrust::device.after(double_ts_event),\n      device_ts.begin(),\n      device_ts.end(),\n      ts.begin()\n  );\n\n  return copy_back_ts_event;\n}\n\nthrust::device_event Double(thrust::host_vector&lt;float&gt;&amp; floats, thrust::host_vector&lt;int&gt;&amp; ints) {\n  // \u975e\u540c\u671f\u5b9f\u884c\u306e\u5b8c\u4e86\u3092\u307e\u3068\u3081\u308b\n  return thrust::when_all(Double(floats), Double(ints));\n}\n</code></pre> <p><code>int</code>\u3068<code>float</code>\u306e\u914d\u5217\u306e\u305d\u308c\u305e\u308c\u306b\u5bfe\u3057\u3066\u3001\u30c7\u30d0\u30a4\u30b9\u3078\u306e\u30b3\u30d4\u30fc\u304c\u5b8c\u4e86\u3057\u305f\u3089\u30012\u4e57\u3059\u308b\u8a08\u7b97\u3092\u884c\u3044\u3001\u7d42\u308f\u308c\u3070\u30db\u30b9\u30c8\u3078\u30b3\u30d4\u30fc\u3059\u308b\u51e6\u7406\u3092\u9806\u756a\u306b\u5b9f\u884c\u30dd\u30ea\u30b7\u30fc\u306b\u6307\u5b9a\u3057\u3066\u3044\u307e\u3059\u3002 \u6700\u5f8c\u306b\u3001\u4e21\u65b9\u306e\u914d\u5217\u304c\u30db\u30b9\u30c8\u3078\u30b3\u30d4\u30fc\u3055\u308c\u305f\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b\u305f\u3081\u306e<code>event</code>\u3092\u4f5c\u6210\u3057\u3066\u3044\u307e\u3059\u3002</p> <p>\u3042\u3068\u306f\u3001<code>main</code>\u95a2\u6570\u3067\u5404\u914d\u5217\u3092\u4f5c\u3063\u3066\u3001<code>Double</code>\u95a2\u6570\u306b\u6e21\u3057\u3066\u3001\u7d50\u679c\u304c\u6b63\u3057\u3044\u304b\u78ba\u8a8d\u3059\u308b\u3060\u3051\u3067\u3059\u3002</p> <p>main.cpp<pre><code>#include \"double.h\"\n\n#include &lt;cassert&gt;\n#include &lt;cmath&gt;\n#include &lt;iostream&gt;\n\nint main() {\n  auto floats = thrust::host_vector&lt;float&gt;();\n  auto ints   = thrust::host_vector&lt;int&gt;();\n\n  std::size_t size = 10000;\n\n  floats.reserve(size);\n  ints.reserve(size);\n\n  for (std::size_t i = 0; i &lt; size; ++i) {\n    floats.push_back(i);\n    ints.push_back(i);\n  }\n\n  auto event = Double(floats, ints);\n\n  event.wait();\n\n  for (std::size_t i = 0; i &lt; size; ++i) {\n    assert(std::abs(floats[i] - i * i) &lt; 1e-5);\n    assert(ints[i] == static_cast&lt;int&gt;(i * i));\n  }\n  std::cout &lt;&lt; \"Success!\\n\";\n\n  return 0;\n}\n</code></pre> \u672c\u5f53\u306f\u6d6e\u52d5\u5c0f\u6570\u70b9\u6570\u306e\u5024\u306e\u6bd4\u8f03\u3092\u3082\u3046\u5c11\u3057\u4e01\u5be7\u306b\u3059\u308b\u3079\u304d\u3067\u3059\u304c\u3001\u672c\u984c\u3068\u95a2\u4fc2\u306a\u3044\u306e\u3067\u826f\u3057\u3068\u3057\u307e\u3059\u3002</p>"},{"location":"articles/thrust-async/#\u5229\u70b9","title":"\u5229\u70b9","text":"<p>\u4e00\u822c\u306b\u975e\u540c\u671f\u5b9f\u884c\u3068\u3044\u3046\u3068\u8eab\u69cb\u3048\u308b\u65b9\u304c\u591a\u3044\u3068\u601d\u308f\u308c\u307e\u3059\u304c\u3001\u4e0a\u306e\u89e3\u8aac\u3092\u898b\u308b\u3068\u610f\u5916\u3068\u7c21\u5358\u306b\u3067\u304d\u308b\u3068\u601d\u308f\u308c\u305f\u306e\u3067\u306f\u306a\u3044\u3067\u3057\u3087\u3046\u304b\u3002 \u307e\u305f\u3001\u5b9f\u884c\u30dd\u30ea\u30b7\u30fc\u3067\u5b9f\u884c\u9806\u5e8f\u3092\u6307\u5b9a\u3067\u304d\u308b\u306e\u3082\u9b45\u529b\u7684\u3067\u3059\u3002</p> <p>\u975e\u540c\u671f\u51e6\u7406\u306e\u5229\u70b9\u3068\u3044\u3046\u3088\u308aThrust\u3092\u4f7f\u3046\u5229\u70b9\u306b\u306a\u308a\u307e\u3059\u304c\u3001\u5b9f\u306frocThrust\u3068\u3044\u3046\u3001CUDA\u3092HIP\u3068ROCm\u306b\u7f6e\u304d\u63db\u3048\u305fThrust\u3092AMD\u304c\u958b\u767a\u3057\u3066\u3044\u307e\u3059\u3002 \u73fe\u6642\u70b9\u3067\u306f\u3001Thrust 1.17.2\u307e\u3067\u5bfe\u5fdc\u3057\u3066\u3044\u307e\u3059\u306e\u3067\u975e\u540c\u671f\u5b9f\u884c\u3082\u3067\u304d\u307e\u3059\u3002 \u8a73\u3057\u304f\u306f\u53c2\u8003\u6587\u732e4\u3092\u3054\u89a7\u304f\u3060\u3055\u3044\u3002</p>"},{"location":"articles/thrust-async/#\u6b20\u70b9","title":"\u6b20\u70b9","text":"<p>\u6b8b\u5ff5\u306a\u304c\u3089\u6b20\u70b9\u304c\u3042\u308a\u307e\u3059\u3002 1\u3064\u76ee\u306e\u6b20\u70b9\u306fCUDA\u304c\u30c7\u30d0\u30a4\u30b9\u306e\u6642\u304b\u3064\u30c7\u30d0\u30a4\u30b9\u5074\u3067\u3057\u304b\u4f7f\u3048\u306a\u3044\u3053\u3068\u3067\u3059\u3002 Thrust\u306foneTBB\u3092\u30c7\u30d0\u30a4\u30b9\u3068\u3057\u3066\u4f7f\u3046\u3053\u3068\u3082\u3067\u304d\u307e\u3059\u304c\u3001\u975e\u540c\u671f\u51e6\u7406\u306foneTBB\u3067\u306f\u5b9f\u88c5\u3055\u308c\u3066\u3044\u307e\u305b\u3093\u3002 \u30b7\u30ea\u30a2\u30eb\u3084OpenMP\u3082\u540c\u69d8\u3067\u3059\u3002 \u300cevent\u3068future\u300d\u7bc0\u3067\u89e6\u308c\u307e\u3057\u305f\u304c\u3001\u3053\u308c\u304c<code>host_event</code>\u304c\u306a\u3044\u7406\u7531\u3060\u3068\u8003\u3048\u3089\u308c\u307e\u3059\u3002 \u3057\u304b\u3057\u3001\u3053\u306e\u6b20\u70b9\u306f\u3055\u307b\u3069\u554f\u984c\u306b\u306a\u3089\u306a\u3044\u3067\u3057\u3087\u3046\u3002</p> <p>2\u3064\u76ee\u306e\u6b20\u70b9\u306f<code>async::copy</code>\u304c\u8ee2\u9001\u3059\u308b\u30c7\u30fc\u30bf\u306e\u578b\u306b\u5bfe\u3057\u3066trivially relocatable\u3067\u3042\u308b\u3053\u3068\u3092\u8981\u6c42\u3057\u3066\u3044\u308b\u3053\u3068\u3067\u3059\u3002 trivially relocatable\u306a\u578b\u3068\u306f\u3001\u7c21\u5358\u306b\u8a00\u3046\u3068\u30b3\u30d4\u30fc\u3068\u30e0\u30fc\u30d6\u3001\u7834\u68c4\u304c<code>default</code>\u3067\u51fa\u6765\u3066\u3001\u4eee\u60f3\u30e1\u30f3\u30d0\u95a2\u6570\u3068\u4eee\u60f3\u7d99\u627f\u3092\u6301\u305f\u305a\u3001\u5168\u3066\u306e\u30e1\u30f3\u30d0\u5909\u6570\u3068\u57fa\u5e95\u30af\u30e9\u30b9\u3082trivially relocatable\u306a\u578b\u3067\u3059\u3002 \u3053\u308c\u306f<code>memcpy</code>\u3067\u30db\u30b9\u30c8\u3068\u30c7\u30d0\u30a4\u30b9\u9593\u3067\u30c7\u30fc\u30bf\u8ee2\u9001\u3067\u304d\u308b\u3088\u3046\u306b\u3059\u308b\u305f\u3081\u306b\u5c0e\u5165\u3055\u308c\u307e\u3057\u305f\u3002 Thrust\u3067\u306f\u3001<code>THRUST_PROCLAIM_TRIVIALLY_RELOCATABLE</code>\u30de\u30af\u30ed\u95a2\u6570\u3092\u4f7f\u3063\u3066\u3001\u4e0e\u3048\u305f\u578b\u304ctrivially relocatable\u3067\u3042\u308b\u3068\u5ba3\u8a00\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002 \u5236\u7d04\u304c\u5f37\u3044\u3082\u306e\u306e\u30d1\u30d5\u30a9\u30fc\u30de\u30f3\u30b9\u306f\u5411\u4e0a\u3057\u3001\u79c1\u304c\u884c\u3063\u305f\u5b9f\u9a13\u3067\u306f\u305d\u3046\u3067\u306a\u3044\u3082\u306e\u306b\u6bd4\u3079\u3066\u5b9f\u884c\u6642\u9593\u304c\u7d0430%\u6e1b\u3063\u3066\u3044\u307e\u3059\u3002 \u8a73\u3057\u304f\u306f\u53c2\u8003\u6587\u732e5\u3092\u3054\u89a7\u304f\u3060\u3055\u3044\u3002</p>"},{"location":"articles/thrust-async/#\u5b9f\u306f","title":"\u5b9f\u306f...","text":"<p>Thrust\u306e\u30ea\u30dd\u30b8\u30c8\u30ea\u3092\u3054\u89a7\u306b\u306a\u308b\u3068\u308f\u304b\u308b\u306e\u3067\u3059\u304c\u3001\u306a\u3093\u3068\u30a2\u30fc\u30ab\u30a4\u30d6\u306b\u3055\u308c\u3066\u307e\u3059\u3002 \u3069\u3046\u3084\u3089\u534a\u5e74\u524d\u304b\u3089CCCL\u3068\u3044\u3046\u3001CUB\u3068libcudacxx\u3082\u4e00\u7dd2\u306b\u3057\u305f\u30ea\u30dd\u30b8\u30c8\u30ea\u306b\u79fb\u3063\u305f\u3088\u3046\u3067\u3059\u3002 \u3053\u306e\u3053\u3068\u306b\u6c17\u3065\u3044\u305f\u306e\u304c\u4e00\u6628\u65e5\u3060\u3063\u305f\u306e\u3067\u3001\u6628\u65e5CCCL\u3067\u3082\u30d3\u30eb\u30c9\u3067\u304d\u308b\u304b\u8a66\u3057\u3066\u3044\u305f\u306e\u3067\u3059\u304c\u3001\u4e0a\u8ff0\u306e\u3084\u308a\u65b9\u3067\u306f\u30a8\u30e9\u30fc\u304c\u51fa\u3066\u3057\u307e\u3044\u307e\u3057\u305f\u3002 \u3069\u3046\u306b\u304b\u89e3\u6c7a\u3057\u305f\u304b\u3063\u305f\u306e\u3067\u3059\u304c\u3001\u6642\u9593\u3082\u306a\u304b\u3063\u305f\u306e\u3067\u3068\u308a\u3042\u3048\u305aThrust\u306b\u5bfe\u3057\u3066\u66f8\u304d\u307e\u3057\u305f\u3002 \u3082\u3057\u3054\u5b58\u3058\u306e\u65b9\u304c\u3044\u3089\u3063\u3057\u3083\u3063\u305f\u3089\u3001\u6559\u3048\u3066\u3044\u305f\u3060\u3051\u308b\u3068\u5e78\u3044\u3067\u3059\u3002</p>"},{"location":"articles/thrust-async/#\u307e\u3068\u3081","title":"\u307e\u3068\u3081","text":"<p>\u30c7\u30fc\u30bf\u304ctrivially relocatable\u306a\u578b\u306a\u3089\u3001\u304a\u624b\u8efd\u306b\u975e\u540c\u671f\u5b9f\u884c\u3067\u304d\u307e\u3059\u3002</p>"},{"location":"articles/thrust-async/#\u30bd\u30fc\u30b9\u30b3\u30fc\u30c9","title":"\u30bd\u30fc\u30b9\u30b3\u30fc\u30c9","text":"<p>GitHub\u306b\u7f6e\u3044\u3066\u3044\u307e\u3059\u3002</p>"},{"location":"articles/thrust-async/#\u53c2\u8003\u6587\u732e","title":"\u53c2\u8003\u6587\u732e","text":"<ol> <li>Separate Compilation and Linking of CUDA C++ Device Code</li> <li>thrust/system/cuda/detail/future.inl</li> <li>thrust/execution_policy.h</li> <li>rocThrust</li> <li>Thrust 1.9.4</li> </ol>"},{"location":"articles/thrust/","title":"Thrust\u306e\u4f7f\u3044\u65b9","text":"<p>Thrust\u3092\u4f7f\u3046\u6a5f\u4f1a\u304c\u3042\u3063\u305f\u306e\u3067\u3001\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u3092\u7c21\u5358\u306b\u7ffb\u8a33\u3059\u308b\u3002</p>"},{"location":"articles/thrust/#\u7d39\u4ecb","title":"\u7d39\u4ecb","text":"<p>Thrust\u3068\u306fSTL\u306b\u57fa\u3065\u3044\u305f\u3001CUDA\u306e\u305f\u3081\u306eC++\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u30e9\u30a4\u30d6\u30e9\u30ea\u3067\u3042\u308b\u3002 Thrust\u306b\u3088\u3063\u3066\u3001CUDA C\u3068\u5b8c\u5168\u306a\u4e92\u63db\u6027\u304c\u3042\u308b\u9ad8\u6c34\u6e96\u306e\u30a4\u30f3\u30bf\u30fc\u30d5\u30a7\u30a4\u30b9\u3092\u901a\u3057\u3066\u3001\u6700\u5c0f\u9650\u306e\u52b4\u529b\u3067\u9ad8\u30d1\u30d5\u30a9\u30fc\u30de\u30f3\u30b9\u306a\u4e26\u5217\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u3092\u5b9f\u88c5\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u308b\u3002</p>"},{"location":"articles/thrust/#\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb","title":"\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb","text":"<p>CUDA\u30c4\u30fc\u30eb\u30ad\u30c3\u30c8\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\u3068\u3001Thrust\u306e\u30d8\u30c3\u30c0\u30d5\u30a1\u30a4\u30eb\u3082\u6a19\u6e96\u306eCUDA\u30a4\u30f3\u30af\u30eb\u30fc\u30c9\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306b\u30b3\u30d4\u30fc\u3055\u308c\u308b\u3002 Thrust\u306f\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u30e9\u30a4\u30d6\u30e9\u30ea\u306a\u306e\u3067\u3001\u3053\u308c\u4ee5\u4e0a\u3059\u308b\u3053\u3068\u306f\u306a\u3044\u3002</p>"},{"location":"articles/thrust/#vectors","title":"Vectors","text":"<p>Thrust\u306f2\u3064\u306evector\u30b3\u30f3\u30c6\u30ca\u3001<code>host_vector</code>\u3068<code>device_vector</code>\u3092\u63d0\u4f9b\u3057\u3066\u3044\u308b\u3002 \u540d\u524d\u304c\u793a\u3059\u3088\u3046\u306b\u3001<code>device_vector</code>\u306fGPU\u306e\u30e1\u30e2\u30ea\u306b\u3042\u308b\u4e00\u65b9\u3067\u3001<code>host_vector</code>\u306f\u30db\u30b9\u30c8\u30e1\u30e2\u30ea\u306b\u4fdd\u5b58\u3055\u308c\u308b\u3002 Thrust\u306evector\u30b3\u30f3\u30c6\u30ca\u306f<code>std::vector</code>\u306b\u4f3c\u3066\u3044\u308b\u3002 <code>std::vector</code>\u306e\u3088\u3046\u306b\u3001<code>host_vector</code>\u3068<code>device_vector</code>\u306f\u52d5\u7684\u306b\u30b5\u30a4\u30ba\u3092\u5909\u3048\u308b\u3053\u3068\u304c\u51fa\u6765\u308b\u3001\u30b8\u30a7\u30cd\u30ea\u30c3\u30af\u30b3\u30f3\u30c6\u30ca(\u4efb\u610f\u306e\u30c7\u30fc\u30bf\u578b\u3092\u6301\u3066\u308b)\u3067\u3042\u308b\u3002 \u4ee5\u4e0b\u306e\u30bd\u30fc\u30b9\u30b3\u30fc\u30c9\u306fThrust\u306evector\u30b3\u30f3\u30c6\u30ca\u306e\u4f7f\u3044\u65b9\u3092\u793a\u3059\u3002</p> <pre><code>#include &lt;thrust/host_vector.h&gt;\n#include &lt;thrust/device_vector.h&gt;\n\n#include &lt;iostream&gt;\n\nint main(void)\n{\n    // H has storage for 4 integers\n    thrust::host_vector&lt;int&gt; H(4);\n\n    // initialize individual elements\n    H[0] = 14;\n    H[1] = 20;\n    H[2] = 38;\n    H[3] = 46;\n\n    // H.size() returns the size of vector H\n    std::cout &lt;&lt; \"H has size \" &lt;&lt; H.size() &lt;&lt; std::endl;\n\n    // print contents of H\n    for(int i = 0; i &lt; H.size(); i++)\n        std::cout &lt;&lt; \"H[\" &lt;&lt; i &lt;&lt; \"] = \" &lt;&lt; H[i] &lt;&lt; std::endl;\n\n    // resize H\n    H.resize(2);\n\n    std::cout &lt;&lt; \"H now has size \" &lt;&lt; H.size() &lt;&lt; std::endl;\n\n    // Copy host_vector H to device_vector D\n    thrust::device_vector&lt;int&gt; D = H;\n\n    // elements of D can be modified\n    D[0] = 99;\n    D[1] = 88;\n\n    // print contents of D\n    for(int i = 0; i &lt; D.size(); i++)\n        std::cout &lt;&lt; \"D[\" &lt;&lt; i &lt;&lt; \"] = \" &lt;&lt; D[i] &lt;&lt; std::endl;\n\n    // H and D are automatically deleted when the function returns\n    return 0;\n}\n</code></pre> <p>\u3053\u306e\u4f8b\u304c\u793a\u3059\u3088\u3046\u306b\u3001<code>=</code>\u6f14\u7b97\u5b50\u306f<code>host_vector</code>\u304b\u3089<code>device_vector</code>\u3078\u30b3\u30d4\u30fc\u3059\u308b\u305f\u3081\u306b\u4f7f\u308f\u308c\u308b(\u9006\u3082\u540c\u69d8)\u3002 \u3082\u3061\u308d\u3093\u3001<code>host_vector</code>\u540c\u58eb\u3084<code>device_vector</code>\u540c\u58eb\u3067\u30b3\u30d4\u30fc\u3059\u308b\u305f\u3081\u306b\u3082\u4f7f\u308f\u308c\u308b\u3002 \u307e\u305f\u3001<code>device_vector</code>\u306e\u500b\u3005\u306e\u8981\u7d20\u306f\u5927\u304b\u3063\u3053\u3092\u4f7f\u3063\u3066\u30a2\u30af\u30bb\u30b9\u3067\u304d\u308b\u304c\u3001\u5404\u30a2\u30af\u30bb\u30b9\u306f<code>cudaMemcpy</code>\u3092\u547c\u3073\u51fa\u3059\u5fc5\u8981\u304c\u3042\u308b\u305f\u3081\u3001\u51fa\u6765\u308b\u9650\u308a\u4f7f\u308f\u306a\u3044\u65b9\u304c\u826f\u3044\u3002</p> <p>\u7279\u5b9a\u306e\u5024\u3067vector\u306e\u3059\u3079\u3066\u306e\u8981\u7d20\u3092\u521d\u671f\u5316\u3057\u305f\u308a\u3001\u3042\u308bvector\u306e\u3042\u308b\u5024\u306e\u96c6\u5408\u3092\u5225\u306evector\u306b\u30b3\u30d4\u30fc\u3060\u3051\u3057\u305f\u308a\u3059\u308b\u3053\u3068\u304c\u4fbf\u5229\u306a\u3053\u3068\u304c\u591a\u3044\u3002 Thrust\u306f\u3053\u308c\u3089\u306e\u64cd\u4f5c\u3092\u884c\u3046\u3044\u304f\u3064\u304b\u306e\u65b9\u6cd5\u3092\u63d0\u4f9b\u3057\u3066\u3044\u308b\u3002</p> <pre><code>#include &lt;thrust/host_vector.h&gt;\n#include &lt;thrust/device_vector.h&gt;\n\n#include &lt;thrust/copy.h&gt;\n#include &lt;thrust/fill.h&gt;\n#include &lt;thrust/sequence.h&gt;\n\n#include &lt;iostream&gt;\n\nint main(void)\n{\n    // initialize all ten integers of a device_vector to 1\n    thrust::device_vector&lt;int&gt; D(10, 1);\n\n    // set the first seven elements of a vector to 9\n    thrust::fill(D.begin(), D.begin() + 7, 9);\n\n    // initialize a host_vector with the first five elements of D\n    thrust::host_vector&lt;int&gt; H(D.begin(), D.begin() + 5);\n\n    // set the elements of H to 0, 1, 2, 3, ...\n    thrust::sequence(H.begin(), H.end());\n\n    // copy all of H back to the beginning of D\n    thrust::copy(H.begin(), H.end(), D.begin());\n\n    // print D\n    for(int i = 0; i &lt; D.size(); i++)\n        std::cout &lt;&lt; \"D[\" &lt;&lt; i &lt;&lt; \"] = \" &lt;&lt; D[i] &lt;&lt; std::endl;\n\n    return 0;\n}\n</code></pre> <p><code>copy</code>\u95a2\u6570\u306f\u30db\u30b9\u30c8\u304b\u30c7\u30d0\u30a4\u30b9\u306e\u8981\u7d20\u306e\u7bc4\u56f2\u3092\u5225\u306e\u30db\u30b9\u30c8\u304b\u30c7\u30d0\u30a4\u30b9\u306evector\u306b\u30b3\u30d4\u30fc\u3059\u308b\u3002 <code>thrust::fill</code>\u95a2\u6570\u306f\u5358\u306b\u7bc4\u56f2\u5185\u306e\u8981\u7d20\u306b\u7279\u5b9a\u306e\u5024\u3092\u5165\u308c\u308b\u3002 <code>sequence</code>\u95a2\u6570\u306f\u7b49\u9593\u9694\u306e\u5024\u306e\u5217\u3092\u4f5c\u6210\u3059\u308b\u305f\u3081\u306b\u4f7f\u3046\u3053\u3068\u304c\u3067\u304d\u308b\u3002</p>"},{"location":"articles/thrust/#21-thrust\u306e\u540d\u524d\u7a7a\u9593","title":"2.1 Thrust\u306e\u540d\u524d\u7a7a\u9593","text":"<p>Thrust\u306e\u540d\u524d\u7a7a\u9593\u306f<code>thrust</code>\u3002</p>"},{"location":"articles/thrust/#22-\u30a4\u30c6\u30ec\u30fc\u30bf\u3068\u9759\u7684\u30c7\u30a3\u30b9\u30d1\u30c3\u30c1","title":"2.2 \u30a4\u30c6\u30ec\u30fc\u30bf\u3068\u9759\u7684\u30c7\u30a3\u30b9\u30d1\u30c3\u30c1","text":"<p>\u751f\u306e\u30dd\u30a4\u30f3\u30bf\u30fc\u3092Thrust\u306e\u95a2\u6570\u306b\u5f15\u6570\u3068\u3057\u3066\u6e21\u3059\u3053\u3068\u3082\u3067\u304d\u308b\u3002 \u305f\u3060\u3057\u3001\u30c7\u30d0\u30a4\u30b9\u30e1\u30e2\u30ea\u3078\u306e\u30dd\u30a4\u30f3\u30bf\u30fc\u306f<code>thrust::device_ptr</code>\u3067\u5305\u307e\u306a\u3051\u308c\u3070\u306a\u3089\u306a\u3044\u3002 \u4f8b\u3048\u3070\u3001 <pre><code>size_t N = 10;\n\n// raw pointer to device memory\nint * raw_ptr;\ncudaMalloc((void **) &amp;raw_ptr, N * sizeof(int));\n\n// wrap raw pointer with a device_ptr\nthrust::device_ptr&lt;int&gt; dev_ptr(raw_ptr);\n\n// use device_ptr in thrust algorithms\nthrust::fill(dev_ptr, dev_ptr + N, (int) 0);\n</code></pre></p> <p><code>device_ptr</code>\u304b\u3089\u751f\u306e\u30dd\u30a4\u30f3\u30bf\u3092\u53d6\u308a\u51fa\u3059\u306b\u306f\u3001<code>raw_pointer_cast</code>\u3092\u4f7f\u3046\u3079\u304d\u3060\u3002 <pre><code>size_t N = 10;\n\n// create a device_ptr\nthrust::device_ptr&lt;int&gt; dev_ptr = thrust::device_malloc&lt;int&gt;(N);\n\n// extract raw pointer from device_ptr\nint * raw_ptr = thrust::raw_pointer_cast(dev_ptr);\n</code></pre></p> <p>\u30a4\u30c6\u30ec\u30fc\u30bf\u3068\u30dd\u30a4\u30f3\u30bf\u3092\u533a\u5225\u3059\u308b\u3082\u3046\u4e00\u3064\u306e\u7406\u7531\u306f\u3001\u30a4\u30c6\u30ec\u30fc\u30bf\u306f\u591a\u304f\u306e\u7a2e\u985e\u306e\u30c7\u30fc\u30bf\u69cb\u9020\u3092\u6a2a\u65ad\u3059\u308b\u305f\u3081\u306b\u4f7f\u3048\u308b\u304b\u3089\u3067\u3042\u308b\u3002 \u4f8b\u3048\u3070\u3001STL\u306f\u53cc\u65b9\u5411\u30a4\u30c6\u30ec\u30fc\u30bf\u3092\u63d0\u4f9b\u3059\u308b\u30ea\u30f3\u30af\u30ea\u30b9\u30c8\u3092\u63d0\u4f9b\u3057\u3066\u3044\u308b\u3002 Thrust\u306f\u305d\u306e\u3088\u3046\u306a\u30b3\u30f3\u30c6\u30ca\u306e\u30c7\u30d0\u30a4\u30b9\u306e\u5b9f\u88c5\u306f\u63d0\u4f9b\u3057\u3066\u3044\u306a\u3044\u304c\u3001\u305d\u308c\u3089\u3068\u4e92\u63db\u6027\u304c\u3042\u308b\u3002 <pre><code>#include &lt;thrust/device_vector.h&gt;\n#include &lt;thrust/copy.h&gt;\n#include &lt;list&gt;\n#include &lt;vector&gt;\n\nint main(void)\n{\n    // create an STL list with 4 values\n    std::list&lt;int&gt; stl_list;\n\n    stl_list.push_back(10);\n    stl_list.push_back(20);\n    stl_list.push_back(30);\n    stl_list.push_back(40);\n\n    // initialize a device_vector with the list\n    thrust::device_vector&lt;int&gt; D(stl_list.begin(), stl_list.end());\n\n    // copy a device_vector into an STL vector\n    std::vector&lt;int&gt; stl_vector(D.size());\n    thrust::copy(D.begin(), D.end(), stl_vector.begin());\n\n    return 0;\n}\n</code></pre></p> <p>Thrust\u306f<code>counting_iterator</code>\u3084<code>zip_iterator</code>\u3068\u3044\u3063\u305f\u3001\u88c5\u98fe\u7684\u306a\u30a4\u30c6\u30ec\u30fc\u30bf\u306e\u96c6\u307e\u308a\u3082\u63d0\u4f9b\u3059\u308b\u3002</p>"},{"location":"articles/thrust/#3-\u30a2\u30eb\u30b4\u30ea\u30ba\u30e0","title":"3. \u30a2\u30eb\u30b4\u30ea\u30ba\u30e0","text":"<p>Thrust\u306f\u305f\u304f\u3055\u3093\u306e\u3042\u308a\u3075\u308c\u305f\u4e26\u5217\u30a2\u30eb\u30b4\u30ea\u30ba\u30e0\u3092\u63d0\u4f9b\u3057\u3066\u3044\u308b\u3002 \u3053\u308c\u3089\u306e\u30a2\u30eb\u30b4\u30ea\u30ba\u30e0\u306e\u591a\u304f\u306fSTL\u306e\u76f4\u63a5\u7684\u306a\u985e\u4f3c\u3092\u6301\u3061\u3001\u540c\u3058STL\u95a2\u6570\u304c\u5b58\u5728\u3059\u308b\u6642\u306f\u540c\u3058\u540d\u524d\u3092\u4f7f\u3046(\u4f8b: <code>thrust::sort</code>\u3068<code>std::sort</code>)\u3002</p> <p>Thrust\u306e\u5168\u3066\u306e\u30a2\u30eb\u30b4\u30ea\u30ba\u30e0\u306f\u30db\u30b9\u30c8\u3068\u30c7\u30d0\u30a4\u30b9\u306e\u4e21\u65b9\u306b\u5bfe\u3059\u308b\u5b9f\u88c5\u3092\u6301\u3064\u3002 \u7279\u306b\u3001Thrust\u306e\u30a2\u30eb\u30b4\u30ea\u30ba\u30e0\u304c\u30db\u30b9\u30c8\u30a4\u30c6\u30ec\u30fc\u30bf\u3068\u4e00\u7dd2\u306b\u547c\u3073\u51fa\u3055\u308c\u305f\u6642\u3001\u30db\u30b9\u30c8\u30d1\u30b9\u304c\u30c7\u30a3\u30b9\u30d1\u30c3\u30c1\u3055\u308c\u308b\u3002 \u540c\u69d8\u306b\u3001\u30c7\u30d0\u30a4\u30b9\u30a4\u30c6\u30ec\u30fc\u30bf\u304c\u7bc4\u56f2\u3092\u5b9a\u7fa9\u3059\u308b\u305f\u3081\u306b\u4f7f\u308f\u308c\u3066\u3044\u308b\u6642\u3001\u30c7\u30d0\u30a4\u30b9\u306e\u5b9f\u88c5\u304c\u547c\u3070\u308c\u308b\u3002</p> <p>\u30db\u30b9\u30c8\u3068\u30c7\u30d0\u30a4\u30b9\u9593\u3067\u30c7\u30fc\u30bf\u3092\u30b3\u30d4\u30fc\u3067\u304d\u308b<code>thrust::copy</code>\u3068\u3044\u3046\u4f8b\u5916\u306f\u3042\u308b\u304c\u3001Thrust\u30a2\u30eb\u30b4\u30ea\u30ba\u30e0\u3078\u306e\u5168\u3066\u306e\u30a4\u30c6\u30ec\u30fc\u30bf\u306e\u5f15\u6570\u306f\u540c\u3058\u5834\u6240(\u5168\u3066\u30db\u30b9\u30c8\u4e0a\u304b\u5168\u3066\u30c7\u30d0\u30a4\u30b9\u4e0a)\u306b\u3042\u308b\u3079\u304d\u3060\u3002 \u3053\u306e\u8981\u4ef6\u3092\u7834\u3063\u305f\u6642\u3001\u30a8\u30e9\u30fc\u30e1\u30c3\u30bb\u30fc\u30b8\u304c\u4f5c\u3089\u308c\u308b\u3002</p>"},{"location":"articles/thrust/#31-\u5909\u5f62","title":"3.1 \u5909\u5f62","text":"<p>\u5b8c\u5168\u306a\u30ea\u30b9\u30c8\u306f\u3053\u3053\u3002</p> <p>\u4ee5\u4e0b\u306e\u30bd\u30fc\u30b9\u30b3\u30fc\u30c9\u306f\u3044\u304f\u3064\u304b\u306e\u5909\u5f62\u30a2\u30eb\u30b4\u30ea\u30ba\u30e0\u3092\u793a\u3057\u3066\u3044\u308b\u3002 <code>thrust::negate</code>\u3084<code>thrust::modulus</code>\u306a\u3069\u306e\u3042\u308a\u3075\u308c\u305ffunctor\u306f<code>thrust/functional.h</code>\u306b\u5b9a\u7fa9\u3055\u308c\u3066\u3044\u308b\u3002</p> <pre><code>#include &lt;thrust/device_vector.h&gt;\n#include &lt;thrust/transform.h&gt;\n#include &lt;thrust/sequence.h&gt;\n#include &lt;thrust/copy.h&gt;\n#include &lt;thrust/fill.h&gt;\n#include &lt;thrust/replace.h&gt;\n#include &lt;thrust/functional.h&gt;\n#include &lt;iostream&gt;\n\nint main(void)\n{\n    // allocate three device_vectors with 10 elements\n    thrust::device_vector&lt;int&gt; X(10);\n    thrust::device_vector&lt;int&gt; Y(10);\n    thrust::device_vector&lt;int&gt; Z(10);\n\n    // initialize X to 0,1,2,3, ....\n    thrust::sequence(X.begin(), X.end());\n\n    // compute Y = -X\n    thrust::transform(X.begin(), X.end(), Y.begin(), thrust::negate&lt;int&gt;());\n\n    // fill Z with twos\n    thrust::fill(Z.begin(), Z.end(), 2);\n\n    // compute Y = X mod 2\n    thrust::transform(X.begin(), X.end(), Z.begin(), Y.begin(), thrust::modulus&lt;int&gt;());\n\n    // replace all the ones in Y with tens\n    thrust::replace(Y.begin(), Y.end(), 1, 10);\n\n    // print Y\n    thrust::copy(Y.begin(), Y.end(), std::ostream_iterator&lt;int&gt;(std::cout, \"\\n\"));\n\n    return 0;\n}\n</code></pre> <p>SAXPY\u306e\u5b9f\u88c5\u306b\u3064\u3044\u3066\u66f8\u3044\u3066\u3042\u308b\u304c\u3001\u7701\u7565\u3002</p> <p>functor\u306f\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u4f5c\u6210\u3067\u304d\u308b\u3002 <pre><code>struct saxpy_functor\n{\n    const float a;\n\n    saxpy_functor(float _a) : a(_a) {}\n\n    __host__ __device__\n        float operator()(const float&amp; x, const float&amp; y) const {\n            return a * x + y;\n        }\n};\n</code></pre></p> <p>\u8907\u96d1\u306a\u8a08\u7b97\u306f\u3001\u7c21\u5358\u306a\u8a08\u7b97\u306b\u5206\u89e3\u3057\u3066\u4f55\u56de\u304b\u306b\u5206\u3051\u3066\u5168\u4f53\u3092\u8a08\u7b97\u3059\u308b\u3088\u308a\u3001\u8907\u96d1\u306a\u8a08\u7b97\u30921\u56de\u3067\u307e\u3068\u3081\u3066\u5168\u4f53\u3092\u8a08\u7b97\u3059\u308b\u307b\u3046\u304c\u65e9\u3044\u3002 \u4f8b\u3048\u3070\u3001\u914d\u5217<code>a</code>, <code>b</code>, <code>x</code>\u306b\u5bfe\u3057\u3066\u3001<code>a * x + b</code>\u3092\u8a08\u7b97\u3059\u308b\u306a\u3089\u3001<code>a * x</code>\u3092\u8a08\u7b97\u3057\u3066<code>b</code>\u3092\u8db3\u3059\u3088\u308a<code>a[i] * x[i] + b[i]</code>\u3092\u8a08\u7b97\u3059\u308b\u307b\u3046\u304c\u65e9\u3044\u3002</p> <p><code>thrust::transform</code>\u306f1\u3064\u304b2\u3064\u306e\u5165\u529b\u5f15\u6570\u3057\u304b\u6301\u305f\u306a\u3044\u304c\u3001\u3053\u306e\u4f8b\u3092\u4f7f\u3046\u30682\u3064\u3088\u308a\u591a\u3044\u5165\u529b\u3067\u30821\u56de\u3067\u51fa\u6765\u308b\u3002</p>"},{"location":"articles/thrust/#32-reductions","title":"3.2 Reductions","text":"<p>\u7279\u306b\u6c17\u3092\u4ed8\u3051\u308b\u3053\u3068\u306f\u306a\u3044\u3002 \u8a73\u7d30\u306f\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u3092\u53c2\u7167\u3002</p>"},{"location":"articles/thrust/#33-prefix-sums","title":"3.3 Prefix-Sums","text":""}]}